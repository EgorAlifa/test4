export const __webpack_id__=1578;export const __webpack_ids__=[1578];export const __webpack_modules__={76614:(e,t,n)=>{n.d(t,{ZS:()=>E,b6:()=>T,tN:()=>b});var s=n(47147),i=n(38262),r=n(42845);const o=500;class p{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,s,i=this.items.length;for(;;i--){let e=this.items.get(i-1);if(e.selection){--i;break}}t&&(n=this.remapping(i,this.items.length),s=n.maps.length);let r,o,l=e.tr,m=[],h=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),s=n.maps.length),s--,void h.push(e);if(n){h.push(new a(e.map));let t,i=e.step.map(n.slice(s));i&&l.maybeStep(i).doc&&(t=l.mapping.maps[l.mapping.maps.length-1],m.push(new a(t,void 0,void 0,m.length+h.length))),s--,t&&n.appendMap(t,s)}else l.maybeStep(e.step);return e.selection?(r=n?e.selection.map(n.slice(s)):e.selection,o=new p(this.items.slice(0,i).append(h.reverse().concat(m)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:o,transform:l,selection:r}}addTransform(e,t,n,s){let i=[],r=this.eventCount,o=this.items,m=!s&&o.length?o.get(o.length-1):null;for(let p=0;p<e.steps.length;p++){let n,l=e.steps[p].invert(e.docs[p]),h=new a(e.mapping.maps[p],l,t);(n=m&&m.merge(h))&&(h=n,p?i.pop():o=o.slice(0,o.length-1)),i.push(h),t&&(r++,t=void 0),s||(m=h)}let u=r-n.depth;return u>h&&(o=l(o,u),r-=u),new p(o.append(i),r)}remapping(e,t){let n=new i.X9;return this.items.forEach((t,s)=>{let i=null!=t.mirrorOffset&&s-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new p(this.items.append(e.map(e=>new a(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-t),i=e.mapping,r=e.steps.length,l=this.eventCount;this.items.forEach(e=>{e.selection&&l--},s);let m=t;this.items.forEach(t=>{let s=i.getMirror(--m);if(null==s)return;r=Math.min(r,s);let o=i.maps[s];if(t.step){let r=e.steps[s].invert(e.docs[s]),p=t.selection&&t.selection.map(i.slice(m+1,s));p&&l++,n.push(new a(o,r,p))}else n.push(new a(o))},s);let h=[];for(let o=t;o<r;o++)h.push(new a(i.maps[o]));let u=this.items.slice(0,s).append(h).append(n),c=new p(u,l);return c.emptyItemCount()>o&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,i=[],r=0;return this.items.forEach((s,o)=>{if(o>=e)i.push(s),s.selection&&r++;else if(s.step){let e=s.step.map(t.slice(n)),o=e&&e.getMap();if(n--,o&&t.appendMap(o,n),e){let p=s.selection&&s.selection.map(t.slice(n));p&&r++;let l,m=new a(o.invert(),e,p),h=i.length-1;(l=i.length&&i[h].merge(m))?i[h]=l:i.push(m)}}else s.map&&n--},this.items.length,0),new p(s.A.from(i.reverse()),r)}}function l(e,t){let n;return e.forEach((e,s)=>{if(e.selection&&0==t--)return n=s,!1}),e.slice(n)}p.empty=new p(s.A.empty,0);class a{constructor(e,t,n,s){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new a(t.getMap().invert(),t,this.selection)}}}class m{constructor(e,t,n,s,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=s,this.prevComposition=i}}const h=20;function u(e,t,n,s){let i,r=n.getMeta(M);if(r)return r.historyState;n.getMeta(C)&&(e=new m(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(o&&o.getMeta(M))return o.getMeta(M).redo?new m(e.done.addTransform(n,void 0,s,y(t)),e.undone,d(n.mapping.maps),e.prevTime,e.prevComposition):new m(e.done,e.undone.addTransform(n,void 0,s,y(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new m(e.done.rebased(n,i),e.undone.rebased(n,i),g(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new m(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),g(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),r=0==e.prevTime||!o&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-s.newGroupDelay||!c(n,e.prevRanges)),l=o?g(e.prevRanges,n.mapping):d(n.mapping.maps);return new m(e.done.addTransform(n,r?t.selection.getBookmark():void 0,s,y(t)),p.empty,l,n.time,null==i?e.prevComposition:i)}}function c(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,s)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&s>=t[i]&&(n=!0)}),n}function d(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,s,i)=>t.push(s,i));return t}function g(e,t){if(!e)return null;let n=[];for(let s=0;s<e.length;s+=2){let i=t.map(e[s],1),r=t.map(e[s+1],-1);i<=r&&n.push(i,r)}return n}function f(e,t,n){let s=y(t),i=M.get(t).spec.config,r=(n?e.undone:e.done).popEvent(t,s);if(!r)return null;let o=r.selection.resolve(r.transform.doc),p=(n?e.done:e.undone).addTransform(r.transform,t.selection.getBookmark(),i,s),l=new m(n?p:r.remaining,n?r.remaining:p,null,0,-1);return r.transform.setSelection(o).setMeta(M,{redo:n,historyState:l})}let v=!1,w=null;function y(e){let t=e.plugins;if(w!=t){v=!1,w=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){v=!0;break}}return v}const M=new r.hs("history"),C=new r.hs("closeHistory");function T(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new r.k_({key:M,state:{init(){return new m(p.empty,p.empty,null,0,-1)},apply(t,n,s){return u(n,s,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,s="historyUndo"==n?b:"historyRedo"==n?E:null;return!!s&&(t.preventDefault(),s(e.state,e.dispatch))}}}})}function _(e,t){return(n,s)=>{let i=M.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(s){let r=f(i,n,e);r&&s(t?r.scrollIntoView():r)}return!0}}const b=_(!1,!0),E=_(!0,!0);_(!1,!1),_(!0,!1)}};