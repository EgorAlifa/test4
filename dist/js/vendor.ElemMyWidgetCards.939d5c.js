export const __webpack_id__=2909;export const __webpack_ids__=[2909];export const __webpack_modules__={11909:(t,e,a)=>{a.d(e,{c:()=>r,z:()=>s});const r=void 0,s=void 0},45393:(t,e,a)=>{a.r(e),a.d(e,{default:()=>x});var r=function(){var t=this,e=t._self._c;return e("w-elem",{attrs:{placeholder:t.$placeholder}},[e("div",{staticClass:"flex gap-2 mb-4 p-3 bg-gray-50 rounded-lg"},[e("button",{staticClass:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",class:t.drilldownCanPush?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed",attrs:{disabled:!t.drilldownCanPush},on:{click:t.drilldownPush}},[e("i",{staticClass:"mdi mdi-arrow-down mr-1"}),t._v(" Детализация: "+t._s(t.drilldownCanPush?"доступна":"недоступна")+" ")]),e("button",{staticClass:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",class:t.drilldownCanPop?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed",attrs:{disabled:!t.drilldownCanPop},on:{click:t.drilldownPop}},[e("i",{staticClass:"mdi mdi-arrow-left mr-1"}),t._v(" Назад: "+t._s(t.drilldownCanPop?"доступно":"недоступно")+" ")])]),t.isLoading?e("div",{staticClass:"flex items-center justify-center h-32"},[e("div",{staticClass:"text-center"},[e("div",{staticClass:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e("p",{staticClass:"text-gray-600"},[t._v("Загрузка данных...")])])]):t.error?e("div",{staticClass:"flex items-center justify-center h-32"},[e("div",{staticClass:"text-red-600 text-center"},[e("i",{staticClass:"mdi mdi-alert-circle-outline text-4xl mb-2"}),e("p",{staticClass:"text-lg font-medium"},[t._v(t._s(t.error))])])]):t._e(),t.props.showSearch&&t.result&&t.result.rows&&t.result.rows.length>0?e("div",{staticClass:"mb-6"},[e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",attrs:{type:"text",placeholder:"Поиск товаров..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("i",{staticClass:"mdi mdi-magnify absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})])]):t.result&&t.result.rows&&t.result.rows.length>0?e("div",{class:t.getGridClasses()},t._l(t.filteredRows,function(a,r){return e("div",{key:r,staticClass:"product-card",on:{click:function(e){return t.selectCard(r)}}},[t.getImageUrl(a)?e("div",{staticClass:"product-image"},[e("img",{attrs:{src:t.getImageUrl(a),alt:t.getTitle(a)},on:{error:t.handleImageError}}),t.props.showBadges?e("div",{staticClass:"product-badge"},[e("span",[t._v(t._s(t.getBadgeText(a)))])]):t._e(),t.props.showRatings?e("div",{staticClass:"product-rating"},[e("i",{staticClass:"mdi mdi-star"}),e("span",[t._v(t._s(t.getRating(a)))])]):t._e()]):t._e(),e("div",{staticClass:"product-info"},[e("h3",{staticClass:"product-title"},[t._v(" "+t._s(t.getTitle(a))+" ")]),t.getDescription(a)?e("p",{staticClass:"product-description"},[t._v(" "+t._s(t.getDescription(a))+" ")]):t._e(),t.getPrice(a)?e("div",{staticClass:"product-price"},[e("span",{staticClass:"price-amount"},[t._v(" "+t._s(t.formatPrice(t.getPrice(a)))+" ")]),t.getQuantity(a)?e("span",{staticClass:"price-quantity"},[t._v(" "+t._s(t.formatQuantity(t.getQuantity(a)))+" ")]):t._e()]):t._e()]),e("div",{staticClass:"product-actions"},[e("button",{staticClass:"action-button",class:t.getButtonClasses(),on:{click:function(e){return e.stopPropagation(),t.drilldownPush(a)}}},[e("i",{staticClass:"mdi mdi-eye"}),e("span",[t._v("Подробнее")])])])])}),0):e("div",{staticClass:"flex items-center justify-center h-32"},[e("div",{staticClass:"text-gray-500 text-center"},[e("i",{staticClass:"mdi mdi-database-off text-4xl mb-2"}),e("p",{staticClass:"text-lg"},[t._v("Нет данных для отображения")])])]),t.props.showPagination&&t.pages>1?e("div",{staticClass:"flex justify-center mt-8"},[e("nav",{staticClass:"flex items-center space-x-2"},[e("button",{staticClass:"px-3 py-2 text-sm font-medium rounded-lg transition-colors",class:t.page>1?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed",attrs:{disabled:t.page<=1},on:{click:function(e){return e.stopPropagation(),t.loadDataPage(t.page-1)}}},[e("i",{staticClass:"mdi mdi-chevron-left"})]),t._l(t.getVisiblePages(),function(a){return e("button",{key:a,staticClass:"px-3 py-2 text-sm font-medium rounded-lg transition-colors",class:a===t.page?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300",on:{click:function(e){return e.stopPropagation(),t.loadDataPage(a)}}},[t._v(" "+t._s(a)+" ")])}),e("button",{staticClass:"px-3 py-2 text-sm font-medium rounded-lg transition-colors",class:t.page<t.pages?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed",attrs:{disabled:t.page>=t.pages},on:{click:function(e){return e.stopPropagation(),t.loadDataPage(t.page+1)}}},[e("i",{staticClass:"mdi mdi-chevron-right"})])],2)]):t._e()])},s=[],i=a(93423),o=a(5021);const n={watch:{queryModel:{handler(t,e){}},queryModels:{handler(t,e){}},metrics:{handler(t,e){}},dimensionsMetrics:{handler(t,e){}},dimensions:{handler(t){!1===t.includes(this.props.dimension)&&(this.props.dimension=t[0]??"",this.propChanged("dimension"))},immediate:!0}}},d=[()=>Promise.all([a.e(4392),a.e(1613)]).then(a.bind(a,55408))],l=()=>({props:{metric:{type:String,default:null,label:"Метрика (количество товаров)"},dimension:{type:String,default:null,label:"Основное измерение (категория товаров)"},drilldownName:{type:String,default:null,label:"Дриллдаун"},titleField:{type:String,default:null,label:"Поле для названия товара"},imageField:{type:String,default:null,label:"Поле для изображения"},priceField:{type:String,default:null,label:"Поле для цены"},descriptionField:{type:String,default:null,label:"Поле для описания"},cardStyle:{type:String,default:"modern",label:"Стиль карточки"},cardSize:{type:String,default:"medium",label:"Размер карточки"},colorScheme:{type:String,default:"blue",label:"Цветовая схема"},showBadges:{type:Boolean,default:!0,label:"Показывать бейджи"},showRatings:{type:Boolean,default:!1,label:"Показывать рейтинги"},columnsCount:{type:Number,default:3,label:"Количество колонок"},showPagination:{type:Boolean,default:!0,label:"Показывать пагинацию"},showSearch:{type:Boolean,default:!1,label:"Показывать поиск"}}}),c={descriptor:l,panels:d,isChildAllowed:!1},p=(0,o.useDatasetMeta)(c,{panel:{mixins:[n]}});var u=a(11909);const g=(0,o.useElemDatasetMixin)({drilldown:!0,panel:!1}),b={extends:i.Elem,mixins:[g],meta:p,hooks:{before(t){},then(t){},catch(t){},finally(){}},data:()=>({selectedCard:null,searchQuery:""}),computed:{drilldownState(){return{canPop:!1,canPush:!1,...this.$drilldown.state[this.props.drilldownName]}},drilldownCanPop(){return this.drilldownState.canPop},drilldownCanPush(){return this.drilldownState.canPush},drilldownDimension(){return this.drilldownState.dimension},filteredRows(){if(!this.result||!this.result.rows)return[];if(!this.searchQuery)return this.result.rows;const t=this.searchQuery.toLowerCase();return this.result.rows.filter(e=>{const a=this.getTitle(e)||"",r=this.getDescription(e)||"";return a.toLowerCase().includes(t)||r.toLowerCase().includes(t)})}},methods:{...u.c,...o.ElemDatasetMixinTypes,loadDataPage(t){this.page=t,this.loadData()},drilldownPush(){const{drilldownName:t}=this.props;if(this.drilldownCanPush){const e=this.result.rows[0][t];this.$storeCommit({[t]:e}),this.$drilldown.push(t,e)}},drilldownPop(){const{drilldownName:t}=this.props;this.drilldownCanPop&&(this.$drilldown.pop(t),this.$storeCommit({[t]:null}))},selectCard(t){this.selectedCard=this.selectedCard===t?null:t},getDimensionValue(t){const{dimension:e}=this.props;return e&&t[e]?t[e]:"Без названия"},formatValue(t){return null===t||void 0===t?"-":"number"===typeof t?t.toLocaleString("ru-RU"):"string"===typeof t?t.length>50?t.substring(0,50)+"...":t:String(t)},drilldownPush(t){const{drilldownName:e}=this.props;if(this.drilldownCanPush&&e&&t[e]){const a=t[e];this.$storeCommit({[e]:a}),this.$drilldown.push(e,a)}},getTitle(t){const{titleField:e}=this.props;return e&&t[e]?t[e]:this.getDimensionValue(t)},getImageUrl(t){const{imageField:e}=this.props;return e&&t[e]?t[e]:null},getPrice(t){const{priceField:e}=this.props;return e&&t[e]?t[e]:null},getDescription(t){const{descriptionField:e}=this.props;return e&&t[e]?t[e]:null},getQuantity(t){const{metric:e}=this.props;return e&&t[e]?t[e]:null},getRating(t){return(2*Math.random()+3).toFixed(1)},getBadgeText(t){const e=this.getPrice(t);return e>1e3?"Премиум":e>500?"Популярный":"Новинка"},getGridClasses(){const{columnsCount:t}=this.props,e="grid gap-6";switch(t){case 1:return`${e} grid-cols-1`;case 2:return`${e} grid-cols-1 md:grid-cols-2`;case 3:return`${e} grid-cols-1 md:grid-cols-2 lg:grid-cols-3`;case 4:return`${e} grid-cols-1 md:grid-cols-2 lg:grid-cols-4`;case 5:return`${e} grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5`;default:return`${e} grid-cols-1 md:grid-cols-2 lg:grid-cols-3`}},getButtonClasses(){const{colorScheme:t}=this.props;switch(t){case"blue":return"bg-blue-600";case"green":return"bg-green-600";case"red":return"bg-red-600";case"purple":return"bg-purple-600";case"orange":return"bg-orange-600";case"gray":return"bg-gray-600";default:return"bg-blue-600"}},formatPrice(t){return t?new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t):""},formatQuantity(t){return t?`${t} шт.`:""},handleImageError(t){t.target.style.display="none"},getVisiblePages(){const t=this.pages,e=this.page,a=2,r=[],s=[];for(let i=Math.max(2,e-a);i<=Math.min(t-1,e+a);i++)r.push(i);return e-a>2?s.push(1,"..."):s.push(1),s.push(...r),e+a<t-1?s.push("...",t):s.push(t),s}}},m=b;a(49328);var h=a(81656),f=(0,h.A)(m,r,s,!1,null,"2a04dcd0",null);const x=f.exports},49328:(t,e,a)=>{var r=a(78141);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=a(99548).A;s("8a7a3fee",r,!0,{sourceMap:!1,shadowMode:!1})},78141:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});var r=a(31601),s=a.n(r),i=a(76314),o=a.n(i),n=o()(s());n.push([t.id,".product-card[data-v-2a04dcd0]{background:#fff;border-radius:20px;-webkit-box-shadow:0 5px 15px rgba(0,0,0,.08);box-shadow:0 5px 15px rgba(0,0,0,.08);-webkit-transition:all .3s ease;transition:all .3s ease;overflow:hidden;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}.product-card[data-v-2a04dcd0]:hover{-webkit-transform:translateY(-5px);transform:translateY(-5px);-webkit-box-shadow:0 15px 35px rgba(0,0,0,.1);box-shadow:0 15px 35px rgba(0,0,0,.1)}.product-image[data-v-2a04dcd0]{position:relative;width:100%;height:200px;overflow:hidden}.product-image img[data-v-2a04dcd0]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.product-card:hover .product-image img[data-v-2a04dcd0]{-webkit-transform:scale(1.05);transform:scale(1.05)}.product-badge[data-v-2a04dcd0]{left:15px;background:linear-gradient(45deg,#ff6b6b,#ee5a24);color:#fff;padding:5px 12px;border-radius:20px;text-transform:uppercase;letter-spacing:.5px}.product-badge[data-v-2a04dcd0],.product-rating[data-v-2a04dcd0]{position:absolute;top:15px;font-size:12px;font-weight:600}.product-rating[data-v-2a04dcd0]{right:15px;background:hsla(0,0%,100%,.95);color:#333;padding:5px 10px;border-radius:15px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;gap:4px}.product-rating i[data-v-2a04dcd0]{color:gold;font-size:14px}.product-info[data-v-2a04dcd0]{padding:20px;-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.product-title[data-v-2a04dcd0]{font-size:18px;font-weight:700;color:#2c3e50;margin-bottom:10px;line-height:1.3}.product-description[data-v-2a04dcd0],.product-title[data-v-2a04dcd0]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-description[data-v-2a04dcd0]{font-size:14px;color:#7f8c8d;line-height:1.5;margin-bottom:15px}.product-price[data-v-2a04dcd0]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin-bottom:15px}.price-amount[data-v-2a04dcd0]{font-size:24px;font-weight:800;color:#2c3e50}.price-quantity[data-v-2a04dcd0]{font-size:12px;color:#95a5a6;font-weight:500}.product-actions[data-v-2a04dcd0]{padding:0 20px 20px}.action-button[data-v-2a04dcd0]{width:100%;padding:12px 20px;border:none;border-radius:15px;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;cursor:pointer;-webkit-transition:all .3s ease;transition:all .3s ease;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;gap:8px}.action-button[data-v-2a04dcd0]:hover{-webkit-transform:translateY(-2px);transform:translateY(-2px);-webkit-box-shadow:0 5px 15px rgba(0,0,0,.2);box-shadow:0 5px 15px rgba(0,0,0,.2)}.action-button i[data-v-2a04dcd0]{font-size:16px}.action-button.bg-blue-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#3498db,#2980b9)}.action-button.bg-green-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#2ecc71,#27ae60)}.action-button.bg-red-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#e74c3c,#c0392b)}.action-button.bg-purple-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#9b59b6,#8e44ad)}.action-button.bg-orange-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#f39c12,#e67e22)}.action-button.bg-gray-600[data-v-2a04dcd0]{background:linear-gradient(45deg,#95a5a6,#7f8c8d)}@media (max-width:640px){.product-card[data-v-2a04dcd0]{margin-bottom:20px}}.product-card[data-v-2a04dcd0]{-webkit-animation:fadeInUp-2a04dcd0 .6s ease-out;animation:fadeInUp-2a04dcd0 .6s ease-out}@-webkit-keyframes fadeInUp-2a04dcd0{0%{opacity:0;-webkit-transform:translateY(30px);transform:translateY(30px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes fadeInUp-2a04dcd0{0%{opacity:0;-webkit-transform:translateY(30px);transform:translateY(30px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}",""]);const d=n}};