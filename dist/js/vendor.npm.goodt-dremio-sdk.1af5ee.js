export const __webpack_id__=1169;export const __webpack_ids__=[1169];export const __webpack_modules__={62274:(e,t,r)=>{r.r(t),r.d(t,{Dremio:()=>S,Errors:()=>s,Query:()=>h,SDK:()=>D});var s={};r.r(s),r.d(s,{SDKCancelRequestError:()=>i,SDKError:()=>a,SDKValidationError:()=>n});class a extends Error{constructor(e,{code:t,data:r,reason:s}={}){super(),this.name="SDKError",this.message=e,this.code=t,this.data=r,this.reason=s}}class i extends Error{constructor(){super(),this.name="SDKCancelRequestError",this.isCancel=!0}}class n extends a{constructor(e,{reason:t}={}){super(e,{reason:t}),this.name="SDKValidationError"}}var o=r(57469),E=r.n(o),l=r(68313),T=r.n(l),R=r(41816),c=r.n(R);E().extend(T()),E().extend(c());const u={firstKey(e){let t=Object.keys(e);return t.length?t[0]:null},replaceKey(e,t,r){return e[r]=e[t],t!=r&&delete e[t],e}},d=({host:e})=>`${e}/api`,A=({authToken:e,admin:t})=>{const r={};return!1===[void 0,null,""].includes(e)&&(r["Authorization"]=`Bearer ${e}`,r["token"]=e),!0===t&&(r["x-dremio-admin"]=1),r},_=e=>e?Promise.resolve(e()):Promise.resolve(),f=({action:e,pathParams:t={},params:r={},queryParams:s,options:a={}})=>{const{url:i="",options:n={},params:o,data:E}=e,l=Object.entries(t).reduce((e,[t,r])=>e.replace(new RegExp(`:${t}`,"g"),String(r)),i),{baseURL:T,method:R}=n;null!=T&&(n.baseURL=d({host:T}));const c={...n,...a,params:{...o,...s,...a.params},data:{...E,...a.data}};return{url:l,...R&&{method:R},params:r,options:c}};class h{constructor({query:e,dimensionList:t}){this.query=e,this.dimensionList=t,this.states=[],this.enableDimensions(Object.keys(t))}enableDimensions(e){let t=[];e.forEach(e=>{let r=this.dimensionList[e];r&&t.push({name:e,index:0,fields:r,filters:[]})}),this.states=t}buildQuery(){let e=h.clone(this.query);return this.states.forEach(({name:t,index:r,fields:s,filters:a})=>{let i=s[r];if(!i)return;let n=h.createDimension({name:t,field:i});h.queryInsertUpdateDimension(e,n),a.forEach(t=>{h.queryInsertUpdateFilter(e,t)})}),e}dimensionStateExists(e){return null!=this.states.find(({name:t})=>t==e)}dimensionStateIsFirst(e){let t=this.states.find(({name:t})=>t==e);return!!t&&0==t.index}dimensionStateIsLast(e){let t=this.states.find(({name:t})=>t==e);return!!t&&t.index==t.fields.length-1}dimensionStateGoNext(e,t,r){let s=this.states.find(({name:t})=>e==t);if(!s||s.index>=s.fields.length-1)return!1;let a=h.createFilter({name:s.fields[s.index],type:r,value:t});s.filters.push(a),s.index++}dimensionStateGoPrev(e){let t=this.states.find(({name:t})=>e==t);return!(!t||t.index<=0)&&(t.filters.pop(),t.index--,!0)}static clone(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return Object.assign({},e)}}static createQuery(e=null){if(e){if(!h.validateQuery(e))throw new n("query schema invalid");if(!Object.keys(e[h.KEY.FIELDS]))throw new n(`query ${h.KEY.FIELDS} schema invalid`);if(!h.validateFrom(e))throw new n(`query ${h.KEY.FROM} schema invalid`);e[h.KEY.METRICS].forEach(e=>{if(!h.validateMetric(e))throw new n(`query ${h.KEY.METRICS} schema invalid`)}),e[h.KEY.DIMENSIONS].forEach(e=>{if(!h.validateDimension(e))throw new n(`query ${h.KEY.DIMENSIONS} schema invalid`)}),e[h.KEY.FILTERS].forEach(e=>{if(!h.validateFilter(e))throw new n(`query ${h.KEY.FILTERS} schema invalid`)}),e[h.KEY.SORT].forEach(e=>{if(!h.validateSort(e))throw new n(`query ${h.KEY.SORT} schema invalid`)})}else e={[h.KEY.FIELDS]:{},[h.KEY.FROM]:[],[h.KEY.METRICS]:[],[h.KEY.DIMENSIONS]:[],[h.KEY.FILTERS]:[],[h.KEY.SORT]:[]};return e}static createMetric({name:e,type:t,field:r},s=null){if(s){if(e&&u.replaceKey(s,u.firstKey(s),e),t){let e=u.firstKey(s);u.replaceKey(s[e],u.firstKey(s[e]),t)}if(r){let e=u.firstKey(s),t=u.firstKey(s[e]);s[e][t]=r}}else s={[e]:{[t]:r}};return s}static createDimension({name:e,field:t},r=null){if(r){if(e&&u.replaceKey(r,u.firstKey(r),e),t){let e=u.firstKey(r);r[e]=t}}else r={[e]:t};return r}static createFilter({name:e,type:t,value:r},s=null){if(s){if(e&&u.replaceKey(s,u.firstKey(s),e),t){let e=u.firstKey(s);u.replaceKey(s[e],u.firstKey(s[e]),t)}if(r){let e=u.firstKey(s),t=u.firstKey(s[e]);s[e][t]=r}}else s={[e]:{[t]:r}};return s}static createSort({name:e,type:t},r=null){if(r){if(e&&u.replaceKey(r,u.firstKey(r),e),t){let e=u.firstKey(r);r[e]=t}}else r={[e]:t};return r}static getMetricName(e){return u.firstKey(e)}static getMetricType(e){let t=u.firstKey(e);return u.firstKey(e[t])}static getMetricField(e){let t=u.firstKey(e),r=u.firstKey(e[t]);return e[t][r]}static getDimensionName(e){return u.firstKey(e)}static getDimensionField(e){let t=u.firstKey(e);return e[t]}static getFilterName(e){return u.firstKey(e)}static getFilterType(e){let t=u.firstKey(e);return u.firstKey(e[t])}static getFilterValue(e){let t=u.firstKey(e),r=u.firstKey(e[t]);return e[t][r]}static getSortName(e){return u.firstKey(e)}static getSortType(e){let t=u.firstKey(e);return e[t]}static queryInsertUpdateFilter(e,t){let r=e[h.KEY.FILTERS],s=h.getFilterName(t),a=r.findIndex(e=>h.getFilterName(e)==s);return a>=0?r.splice(a,1,t):r.push(t),e}static queryRemoveFilter(e,t){return e[h.KEY.FILTERS]=e[h.KEY.FILTERS].filter(e=>h.getFilterName(e)!=t),e}static queryRemoveAllFilters(e){return e[h.KEY.FILTERS]=[],e}static queryReplaceAllFilterValues(e){return e[h.KEY.FILTERS].forEach(e=>{let t=h.getFilterValue(e).map(e=>{for(let t in h.FILTER_VALUE){let r=h.FILTER_VALUE_HANDLER[t];if(h.FILTER_VALUE[t]===e&&r)return r()}return e});h.createFilter({value:t},e)}),e}static queryGetDimensionField(e,t){let r=e[h.KEY.DIMENSIONS].find(e=>h.getDimensionName(e)==t);return r?r[t]:null}static queryInsertUpdateDimension(e,t){let r=e[h.KEY.DIMENSIONS],s=h.getDimensionName(t),a=r.findIndex(e=>h.getDimensionName(e)==s);return a>=0?r.splice(a,1,t):r.push(t),e}static queryFieldNames(e){return Object.keys(e[h.KEY.FIELDS])}static queryMetricNames(e){return e[h.KEY.METRICS].map(e=>h.getMetricName(e)).filter((e,t,r)=>r.indexOf(e)===t)}static queryDimensionNames(e){return e[h.KEY.DIMENSIONS].map(e=>h.getDimensionName(e)).filter((e,t,r)=>r.indexOf(e)===t)}static validateQuery(e){let t=Object.values(h.KEY),r=t.reduce((t,r)=>t+e[r]?1:0,0);return t.length!=r}static validateFrom(e){let t=e[h.KEY.FROM];return Array.isArray(t)&&t.length>0}static validateMetric(e){if(!h._validateObj(e))return!1;let t=u.firstKey(e),r=e[t];if(!r||!h._validateObj(r))return!1;let s=u.firstKey(r);return!(Object.values(h.METRIC_TYPE).indexOf(s)<0)&&("string"==typeof e[t][s]&&e[t][s].length>0)}static validateDimension(e){if(!h._validateObj(e))return!1;let t=u.firstKey(e);return"string"==typeof e[t]&&e[t].length>0}static validateFilter(e){if(!h._validateObj(e))return!1;let t=u.firstKey(e),r=e[t];if(!r||!h._validateObj(r))return!1;let s=u.firstKey(r);if(Object.values(h.FILTER_TYPE).indexOf(s)<0)return!1;let a=e[t][s];return!(!Array.isArray(a)||!h.FILTER_TYPE_VALUE_VALIDATION[s](a))}static validateSort(e){if(!h._validateObj(e))return!1;let t=u.firstKey(e);return!(Object.values(h.SORT_TYPE).indexOf(e[t])<0)}static _validateObj(e){if("object"!==typeof e)return!1;let t=u.firstKey(e);return!!t}}h.FORMAT={DATE:"YYYY-MM-DD",TIME:"HH:mm:ss",TIMESTAMP:"YYYY-MM-DD HH:mm:ss"},h.KEY={FIELDS:"$fields",FROM:"$from",METRICS:"$metrics",DIMENSIONS:"$dimensions",FILTERS:"$filters",SORT:"$sort"},h.SORT_TYPE={ASC:"asc",DESC:"desc"},h.METRIC_TYPE={VALUE:"$v",EXPRESSION:"$exp",AVG:"$avg",COUNT:"$count",MAX:"$max",MIN:"$min",SUM:"$sum",GROUP_CONCAT:"$gc",GROUP_CONCAT_UNIQ:"$gcu"},h.FILTER_TYPE={EQ:"$eq",EQ_NOT:"$eqn",IS:"$is",IS_NOT:"$isn",LESS:"$lt",LESS_EQ:"$ltq",GREATER:"$gt",GREATER_EQ:"$gtq",IN:"$in",IN_NOT:"$inn",BETWEEN:"$btw",BETWEEN_NOT:"$btwn",LIKE:"$lk"},h.FILTER_VALUE={YEAR_ROLLING:"#year-rolling#",YEAR_START:"#year-start#",YEAR_END:"#year-end#",YEAR_PREV_START:"#year-prev-start#",YEAR_PREV_END:"#year-prev-end#",QUARTER_START:"#quarter-start#",QUARTER_END:"#quarter-end#",QUARTER_PY_START:"#quarter-py-start#",QUARTER_PY_END:"#quarter-py-end#",QUARTER_PREV_START:"#quarter-prev-start#",QUARTER_PREV_END:"#quarter-prev-end#",MONTH_ROLLING:"#month-rolling#",MONTH_START:"#month-start#",MONTH_END:"#month-end#",MONTH_PY_START:"#month-py-start#",MONTH_PY_END:"#month-py-end#",MONTH_PREV_START:"#month-prev-start#",MONTH_PREV_END:"#month-prev-end#",WEEK_ROLLING:"#week-rolling#",WEEK_START:"#week-start#",WEEK_END:"#week-end#",WEEK_PY_START:"#week-py-start#",WEEK_PY_END:"#week-py-end#",WEEK_PREV_START:"#week-prev-start#",WEEK_PREV_END:"#week-prev-end#",TODAY:"#today#",YESTERDAY:"#yesterday#"},h.FILTER_VALUE_HANDLER={YEAR_ROLLING:()=>E()().add(-365,"d").format(h.FORMAT.DATE),YEAR_START:()=>E()().startOf("year").format(h.FORMAT.DATE),YEAR_END:()=>E()().endOf("year").format(h.FORMAT.DATE),YEAR_PREV_START:()=>E()().add(-1,"y").startOf("year").format(h.FORMAT.DATE),YEAR_PREV_END:()=>E()().add(-1,"y").endOf("year").format(h.FORMAT.DATE),QUARTER_START:()=>E()().startOf("Q").format(h.FORMAT.DATE),QUARTER_END:()=>E()().endOf("Q").format(h.FORMAT.DATE),QUARTER_PY_START:()=>E()().add(-1,"y").startOf("Q").format(h.FORMAT.DATE),QUARTER_PY_END:()=>E()().add(-1,"y").endOf("Q").format(h.FORMAT.DATE),QUARTER_PREV_START:()=>E()().add(-1,"Q").startOf("Q").format(h.FORMAT.DATE),QUARTER_PREV_END:()=>E()().add(-1,"Q").endOf("Q").format(h.FORMAT.DATE),MONTH_ROLLING:()=>E()().add(-30,"d").format(h.FORMAT.DATE),MONTH_START:()=>E()().startOf("month").format(h.FORMAT.DATE),MONTH_END:()=>E()().endOf("month").format(h.FORMAT.DATE),MONTH_PY_START:()=>E()().add(-1,"y").startOf("month").format(h.FORMAT.DATE),MONTH_PY_END:()=>E()().add(-1,"y").endOf("month").format(h.FORMAT.DATE),MONTH_PREV_START:()=>E()().add(-1,"M").startOf("month").format(h.FORMAT.DATE),MONTH_PREV_END:()=>E()().add(-1,"M").endOf("month").format(h.FORMAT.DATE),WEEK_ROLLING:()=>E()().add(-7,"d").format(h.FORMAT.DATE),WEEK_START:()=>E()().startOf("isoWeek").format(h.FORMAT.DATE),WEEK_END:()=>E()().endOf("isoWeek").format(h.FORMAT.DATE),WEEK_PY_START:()=>E()().add(-1,"y").startOf("isoWeek").format(h.FORMAT.DATE),WEEK_PY_END:()=>E()().add(-1,"y").endOf("isoWeek").format(h.FORMAT.DATE),WEEK_PREV_START:()=>E()().startOf("isoWeek").add(-1,"d").startOf("isoWeek").format(h.FORMAT.DATE),WEEK_PREV_END:()=>E()().startOf("isoWeek").add(-1,"d").endOf("isoWeek").format(h.FORMAT.DATE),TODAY:()=>E()().format(h.FORMAT.DATE),YESTERDAY:()=>E()().add(-1,"d").format(h.FORMAT.DATE)},h.FILTER_TYPE_VALUE_VALIDATION={[h.FILTER_TYPE.EQ]:e=>1==e.length,[h.FILTER_TYPE.EQ_NOT]:e=>1==e.length,[h.FILTER_TYPE.IS]:e=>1==e.length,[h.FILTER_TYPE.IS_NOT]:e=>1==e.length,[h.FILTER_TYPE.LESS]:e=>1==e.length,[h.FILTER_TYPE.LESS_EQ]:e=>1==e.length,[h.FILTER_TYPE.GREATER]:e=>1==e.length,[h.FILTER_TYPE.GREATER_EQ]:e=>1==e.length,[h.FILTER_TYPE.IN]:e=>e.length>0,[h.FILTER_TYPE.IN_NOT]:e=>e.length>0,[h.FILTER_TYPE.BETWEEN]:e=>2==e.length,[h.FILTER_TYPE.BETWEEN_NOT]:e=>2==e.length,[h.FILTER_TYPE.LIKE]:e=>e.length>0,[h.FILTER_TYPE.MAX]:e=>1==e.length,[h.FILTER_TYPE.MIN]:e=>1==e.length};var m=r(94335);class O{constructor({getBaseURL:e,getHeaders:t,beforeRequest:r,processResponseError:s}){this._requests=[],this._getBaseURL=e,this._setupHandlers({processResponseError:s}),this._setupAxios({getHeaders:t,beforeRequest:r})}get baseURL(){return this._getBaseURL()}_setupAxios({getHeaders:e,beforeRequest:t}){this._axios=m.A.create(),this._axios.interceptors.request.use(async(r={})=>(null!=t&&await _(()=>t(this)),r.headers={...r.headers,...e()},r))}_setupHandlers({processResponseError:e}){this.processResponseError=e,this._axiosResolveHandler=({data:e})=>null!=e.error?(this._handleError(e.error),null):e,this._axiosRejectHandler=e=>{this._handleError(e)}}request({url:e,method:t="get",params:r,options:s}){const[a,i]=this._buildRequest({url:e,method:t,params:r,options:s}),n=this._axios.request(a).then(this._axiosResolveHandler,this._axiosRejectHandler);return this._cancelable(n,i)}_buildRequest({url:e,method:t="get",params:r,options:s}){const a=m.A.CancelToken.source(),i="get"===t.toLocaleLowerCase(),{params:n,data:o,...E}=s,l={url:e,method:t,...i?{params:{...r,...n},data:o}:{data:{...r,...o},params:n},cancelToken:a.token,...E};return[l,a]}dispose(){while(this._requests.length){let e=this._requests.pop();e.cancel()}}_cancelable(e,t){let r=()=>this._removeRequest(s),s=e.finally(r);return s.cancel=()=>{t.cancel("cancel"),r()},this._addRequest(s),s}_addRequest(e){this._requests.push(e)}_removeRequest(e){this._requests=this._requests.filter(t=>t!==e)}_handleError(e){const t=this._buildError(e);if(null==this.processResponseError)throw t;const r=this.processResponseError(t);if(r instanceof Error)throw r;if(null!==r)throw e}_buildError(e){if(m.A.isCancel(e))return new i;if(e instanceof Error===!1)return new a(e,{code:0,reason:e});const{message:t}=e;if(!1===m.A.isAxiosError(e))return new a(t,{code:0,reason:e});const{response:r,request:s,config:{url:n,data:o,method:E}}=e,l={url:n,data:o,method:E};if(null!=r){const{data:e,status:s}=r,i=null!=e.error?e.error:t;return new a(i,{data:e,code:s,reason:l})}return new a(t,null!=s?{code:0,reason:l}:{code:0,reason:e})}}const S={DATASET_TYPE:{VIRTUAL:"VIRTUAL",PROMOTED:"PROMOTED",DIRECT:"DIRECT"},CONTAINER_TYPE:{SPACE:"SPACE",SOURCE:"SOURCE",FOLDER:"FOLDER",HOME:"HOME"},JOB_STATUS:{NOT_SUBMITTED:"NOT_SUBMITTED",STARTING:"STARTING",RUNNING:"RUNNING",COMPLETED:"COMPLETED",CANCELED:"CANCELED",FAILED:"FAILED",CANCELLATION_REQUESTED:"CANCELLATION_REQUESTED",ENQUEUED:"ENQUEUED"},SOURCE_TYPE:{AMAZONELASTIC:"Amazon Elasticsearch Service",REDSHIFT:"Amazon Redshift",S3:"Amazon S3",ADLS:"Azure Data Lake Storage Gen1",AZURE_STORAGE:"Azure Storage",ELASTIC:"Elasticsearch",HDFS:"HDFS",HIVE:"Hive",MAPRFS:"MapR-FS",MSSQL:"Microsoft SQL Server",MONGO:"MongoDB",MYSQL:"MySQL",NAS:"NAS",ORACLE:"Oracle",POSTGRES:"PostgreSQL"}},p=({connection:e,host:t})=>({DREMIO_URL:{url:"v1/dremio-url",params:{connection:e},options:{baseURL:t,method:"get"}},PERMISSIONS:{url:"v1/permissions",params:{connection:e},options:{baseURL:t,method:"get"}},PERMISSIONS_INFO:{url:"v1/permissions-info",params:{connection:e},options:{baseURL:t,method:"get"}},CATALOG:{url:"v1/catalog",params:{connection:e},options:{baseURL:t,method:"get"}},CATALOG_BY_PATH:{url:"v1/catalog/by-path",data:{connection:e},options:{baseURL:t,method:"post"}},DATA:{url:"v1/data",data:{connection:e},options:{baseURL:t,method:"post"}}}),N={host:"http://localhost",connection:null,replaceFilterValues:!0,authToken:null,admin:!1,beforeRequest:null,processResponseError:null,processResponseResult:null};class D{constructor(e){this.config={...N,...e};const{beforeRequest:t,processResponseError:r}=this.config;this.transport=new O({beforeRequest:t,processResponseError:r,getHeaders:()=>A(this.config),getBaseURL:()=>this.config.host}),this.processResponseResult=this.config.processResponseResult}getDremioUrl(){return this.requestAction({action:p(this.config).DREMIO_URL})}getPermissions(){return this.requestAction({action:p(this.config).PERMISSIONS})}getPermissionsInfo(){return this.requestAction({action:p(this.config).PERMISSIONS_INFO})}getRootEntities(){return this.requestAction({action:p(this.config).CATALOG})}getEntityByPath(e){const t={path:e};return this.requestAction({action:p(this.config).CATALOG_BY_PATH,params:t})}getData(e,t=0,r=10,s=!1){this.config.replaceFilterValues&&(e=h.queryReplaceAllFilterValues(h.clone(e)));const a={query:e,limit:r,offset:t};return s&&(a.debug=s),this.requestAction({action:p(this.config).DATA,params:a}).then(e=>null==e||null==this.processResponseResult?e:this.processResponseResult(e))}cancelActiveRequests(){this.transport.dispose()}requestAction({action:e,pathParams:t={},params:r={},queryParams:s,options:a}){return this.transport.request(f({action:e,pathParams:t,params:r,queryParams:s,options:a}))}}}};