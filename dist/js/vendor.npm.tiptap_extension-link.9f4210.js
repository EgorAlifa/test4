export const __webpack_id__=2629;export const __webpack_ids__=[2629];export const __webpack_modules__={84460:(t,o,e)=>{e.d(o,{N_:()=>k});var n=e(90277),s=e(54631),i=e(42845);const r="[\0-   ᠎ -\u2029 　]",l=new RegExp(r),a=new RegExp(`${r}$`),u=new RegExp(r,"g");function p(t){return 1===t.length?t[0].isLink:!(3!==t.length||!t[1].isLink)&&["()","[]"].includes(t[0].value+t[2].value)}function d(t){return new i.k_({key:new i.hs("autolink"),appendTransaction:(o,e,i)=>{const r=o.some(t=>t.docChanged)&&!e.doc.eq(i.doc),u=o.some(t=>t.getMeta("preventAutolink"));if(!r||u)return;const{tr:d}=i,c=(0,n.T7)(e.doc,[...o]),h=(0,n.FF)(c);return h.forEach(({newRange:o})=>{const e=(0,n.Nx)(i.doc,o,t=>t.isTextblock);let r,u;if(e.length>1)r=e[0],u=i.doc.textBetween(r.pos,r.pos+r.node.nodeSize,void 0," ");else if(e.length){const t=i.doc.textBetween(o.from,o.to," "," ");if(!a.test(t))return;r=e[0],u=i.doc.textBetween(r.pos,o.to,void 0," ")}if(r&&u){const o=u.split(l).filter(Boolean);if(o.length<=0)return!1;const e=o[o.length-1],a=r.pos+u.lastIndexOf(e);if(!e)return!1;const c=(0,s.qw)(e).map(o=>o.toObject(t.defaultProtocol));if(!p(c))return!1;c.filter(t=>t.isLink).map(t=>({...t,from:a+t.start+1,to:a+t.end+1})).filter(t=>!i.schema.marks.code||!i.doc.rangeHasMark(t.from,t.to,i.schema.marks.code)).filter(o=>t.validate(o.value)).filter(o=>t.shouldAutoLink(o.value)).forEach(o=>{(0,n.hO)(o.from,o.to,i.doc).some(o=>o.mark.type===t.type)||d.addMark(o.from,o.to,t.type.create({href:o.href}))})}}),d.steps.length?d:void 0}})}function c(t){return new i.k_({key:new i.hs("handleClickLink"),props:{handleClick:(o,e,s)=>{var i,r;if(0!==s.button)return!1;if(!o.editable)return!1;let l=s.target;const a=[];while("DIV"!==l.nodeName)a.push(l),l=l.parentNode;if(!a.find(t=>"A"===t.nodeName))return!1;const u=(0,n.gu)(o.state,t.type.name),p=s.target,d=null!==(i=null===p||void 0===p?void 0:p.href)&&void 0!==i?i:u.href,c=null!==(r=null===p||void 0===p?void 0:p.target)&&void 0!==r?r:u.target;return!(!p||!d)&&(window.open(d,c),!0)}}})}function h(t){return new i.k_({key:new i.hs("handlePasteLink"),props:{handlePaste:(o,e,n)=>{const{state:i}=o,{selection:r}=i,{empty:l}=r;if(l)return!1;let a="";n.content.forEach(t=>{a+=t.textContent});const u=(0,s.I6)(a,{defaultProtocol:t.defaultProtocol}).find(t=>t.isLink&&t.value===a);return!(!a||!u)&&t.editor.commands.setMark(t.type,{href:u.href})}}})}function f(t,o){const e=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return o&&o.forEach(t=>{const o="string"===typeof t?t:t.scheme;o&&e.push(o)}),!t||t.replace(u,"").match(new RegExp(`^(?:(?:${e.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const k=n.CU.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{"string"!==typeof t?(0,s.ZV)(t.scheme,t.optionalSlashes):(0,s.ZV)(t)})},onDestroy(){(0,s.cL)()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,o)=>!!f(t,o.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const o=t.getAttribute("href");return!(!o||!this.options.isAllowedUri(o,{defaultValidate:t=>!!f(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:t=>!!f(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",(0,n.KV)(this.options.HTMLAttributes,t),0]:["a",(0,n.KV)(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:o})=>{const{href:e}=t;return!!this.options.isAllowedUri(e,{defaultValidate:t=>!!f(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&o().setMark(this.name,t).setMeta("preventAutolink",!0).run()},toggleLink:t=>({chain:o})=>{const{href:e}=t;return!!this.options.isAllowedUri(e,{defaultValidate:t=>!!f(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&o().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,n.Zc)({find:t=>{const o=[];if(t){const{protocols:e,defaultProtocol:n}=this.options,i=(0,s.I6)(t).filter(t=>t.isLink&&this.options.isAllowedUri(t.value,{defaultValidate:t=>!!f(t,e),protocols:e,defaultProtocol:n}));i.length&&i.forEach(t=>o.push({text:t.value,data:{href:t.href},index:t.start}))}return o},type:this.type,getAttributes:t=>{var o;return{href:null===(o=t.data)||void 0===o?void 0:o.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:o,defaultProtocol:e}=this.options;return this.options.autolink&&t.push(d({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:t=>this.options.isAllowedUri(t,{defaultValidate:t=>!!f(t,o),protocols:o,defaultProtocol:e}),shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&t.push(c({type:this.type})),this.options.linkOnPaste&&t.push(h({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}})}};