export const __webpack_id__=8017;export const __webpack_ids__=[8017];export const __webpack_modules__={2616:(e,t,i)=>{var n=i(45119);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(99548).A;o("3e129dd3",n,!0,{sourceMap:!1,shadowMode:!1})},14093:(e,t,i)=>{i.d(t,{$d:()=>d,DI:()=>a,K9:()=>c,PL:()=>p,e6:()=>y,eC:()=>l,em:()=>u,lJ:()=>m});var n=i(14120),o=i(57469),r=i.n(o),s=i(21879);const a={METRIC_DIMENSION:{name:"метрика/измерение",handler:(e,t)=>t[e]||null},INPUT:{name:"ввод",handler:(e,t)=>e}},l={METRIC:{name:"метрика",handler:(e,t)=>t[e]||null},DIMENSION:{name:"измерение",handler:(e,t)=>t[e]||null},INPUT:{name:"ввод",handler:(e,t)=>e}},c={NUM:{name:"число",handler:(e,{prec:t=-1,tsep:i="",fsep:n=".",pref:o="",postf:r="",mult:a=1})=>{if(!(0,s.A)(e))return e;const l=Number(e)*a,c=t>=0?l.toFixed(parseInt(t,10)):l.toString();let[u]=c.split(".");return u=u.replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`),o+u.join(n)+r},options:{prec:{name:".000",type:Number},tsep:{name:"1 000",type:String},fsep:{name:"0.0",type:String},pref:{name:"{A} 123",type:String},postf:{name:"123 {A}",type:String},mult:{name:"*N",type:Number}}},DATE:{name:"дата",handler:(e,{format:t="DD/MM/YYYY"})=>{const i=r()(e);return i.isValid()?i.format(t):e},options:{format:{name:"формат",type:String}}}},u={ALL:{name:"всегда",handler:(e,t)=>!0},EQ:{name:"=",handler:(e,t)=>(0,s.A)(e)&&(0,s.A)(t)?Number(e)===Number(t):e===t},GT:{name:">",handler:(e,t)=>Number(e)>Number(t)},LT:{name:"<",handler:(e,t)=>Number(e)<Number(t)}},p=({typeCondition:e=null,type:t=null,value:i="",style:n=[]}={})=>({typeCondition:e,type:t,value:i,style:n}),d=({dataType:e=null,condition:t="",value:i=null,icon:n="",color:o="#000"}={})=>({dataType:e,condition:t,value:i,icon:n,color:o}),m=(e,t)=>Number.isNaN(Number(e))?e:`${e}${t}`,h={["0"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:0,modifiers:[n.NumberFormatPattern.Modifier.FIXED]}),type:n.NumberFormat.Type.DECIMAL}).toString(),["1"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:1,modifiers:[n.NumberFormatPattern.Modifier.FIXED]}),type:n.NumberFormat.Type.DECIMAL}).toString(),["2"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:2,modifiers:[n.NumberFormatPattern.Modifier.FIXED]}),type:n.NumberFormat.Type.DECIMAL}).toString(),["0%"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:0,modifiers:[n.NumberFormatPattern.Modifier.PERCENT]}),type:n.NumberFormat.Type.DECIMAL}).toString(),["1%"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:1,modifiers:[n.NumberFormatPattern.Modifier.PERCENT]}),type:n.NumberFormat.Type.DECIMAL}).toString(),["2%"]:new n.NumberFormat({pattern:new n.NumberFormatPattern({digits:2,modifiers:[n.NumberFormatPattern.Modifier.PERCENT]}),type:n.NumberFormat.Type.DECIMAL}).toString()},f="n",y=(e,t)=>(e===f?h["0"]:h[String(e)])??t},25711:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(31601),o=i.n(n),r=i(76314),s=i.n(r),a=s()(o());a.push([e.id,".NumberCounting_numbers_BcL_5{line-height:var(--w-numbers_line-height);white-space:normal;display:-webkit-inline-box;display:inline-flex;font-size:var(--w-numbers_font-size);color:var(--w-numbers_color)}.NumberCounting_numbers-window_s9JAO{display:inline-block;overflow:hidden;height:1em}.NumberCounting_numbers-window-symbol_pdFSF{font:inherit;overflow:inherit}@-webkit-keyframes NumberCounting_counting_hUFuk{to{-webkit-transform:translate3d(0,-10em,0);transform:translate3d(0,-10em,0)}}@keyframes NumberCounting_counting_hUFuk{to{-webkit-transform:translate3d(0,-10em,0);transform:translate3d(0,-10em,0)}}",""]),a.locals={numbers:"NumberCounting_numbers_BcL_5","numbers-window":"NumberCounting_numbers-window_s9JAO","numbers-window-symbol":"NumberCounting_numbers-window-symbol_pdFSF",counting:"NumberCounting_counting_hUFuk"};const l=a},27788:(e,t,i)=>{i.r(t),i.d(t,{default:()=>re});var n=function(){var e=this,t=e._self._c;return t("w-elem",{attrs:{placeholder:e.$placeholder}},[t("div",{staticClass:"pos-rel w-100 h-100",class:e.kpiWrapperClasses,style:e.backgroundColoring,on:{click:e.onWidgetClick}},[e.isShownHintAbsolute?t("div",{staticClass:"absolute-hint",style:e.absoluteHintCssVars},[t("ui-kpi-hint")],1):e._e(),e.props.showTitle?t("div",{staticClass:"kpi-title",class:e.kpiTitleClasses},[e.isHintShownByTitle&&"left"===e.props.positionHint?t("div",{staticClass:"mar-right-l1"},[t("ui-kpi-hint")],1):e._e(),e._v(" "+e._s(e.title)+" "),e.isHintShownByTitle&&"right"===e.props.positionHint?t("div",{staticClass:"mar-left-l1"},[t("ui-kpi-hint")],1):e._e()]):e._e(),t("div",{staticClass:"kpi-data",class:[e.metricPosition,e.props.isViewModeAbsolute?"pos-abs":""],style:{...e.customStyle,"font-size":e.fontSizeMetric,"justify-content":e.positionMetric}},[t("div",{class:e.metricClasses},[t("div",{class:"left"===e.props.positionBench||"right"===e.props.positionBench?"d-flex":"d-block"},[e.isLoading||"left"!==e.props.positionBench&&"top"!==e.props.positionBench||!e.props.showBench?e._e():t("div",{staticClass:"d-flex",style:{...e.styleBench,...e.customBenchStyle,"font-family":e.props.fontBench,"font-size":e.fontSizeBench}},[t("div",{staticClass:"mar-right-2"},["row"===e.props.indicatorBenchmarkIcon.direction?t("i",{staticClass:"benchmark-icon",class:e.indicatorBenchmarkClasses,style:e.indicatorBenchmarkCssStyle}):e._e(),e.props.benchPrefixIcon?t("span",[t("i",{staticClass:"mdi",class:e.props.benchPrefixIcon,style:{color:e.props.benchPrefixIconColor,fontSize:e.props.benchPrefixIconFontSize}})]):e._e(),t("span",{staticClass:"bench-prefix-text"},[e._v(" "+e._s(e.props.benchPreFix+" ")+" ")]),t("span",{staticClass:"benchmark-value"},[e._v(" "+e._s(e.formattedBench)+" ")]),t("span",{staticClass:"bench-postfix-text"},[e._v(" "+e._s(" "+e.props.benchPostFix)+" ")]),"row-reverse"===e.props.indicatorBenchmarkIcon.direction?t("i",{staticClass:"benchmark-icon",class:e.indicatorBenchmarkClasses,style:e.indicatorBenchmarkCssStyle}):e._e()])]),e.isLoading&&!e.props.showNumberAnimation?t("div",{staticClass:"preloader color-primary"}):t("div",{staticClass:"d-flex items-baseline"},[e.isHintShownByMetric&&"left"===e.props.positionHint?t("div",{staticClass:"mar-right-l1"},[t("ui-kpi-hint")],1):e._e(),t("div",["row"===e.props.indicatorMetricIcon.direction?t("i",{staticClass:"metric-icon",class:e.indicatorMetricClasses,style:e.indicatorMetricCssStyle}):e._e(),e.props.prefixIcon?t("span",[t("i",{staticClass:"prefix-icon mdi",class:e.props.prefixIcon,style:e.prefixIconStyles})]):e._e(),t("span",{staticClass:"prefix-text"},[e._v(e._s(e.metricPrefix))]),e.shouldAnimateNumber?[e.props.showEditorNumberAnimation?t("ui-number-animation",{staticClass:"number-animation",attrs:{"number-css-vars":e.animatedNumberCssVars,"digit-number":e.props.numberAnimationDigits,"metric-digit-capacity":e.props.metricDigitCapacity,delay:e.props.numberAnimationDelay}}):e._e(),e.props.shouldCountingNumber?t("ui-number-counting",{key:e.formattedValue,staticClass:"number-animation",attrs:{"number-css-vars":e.animatedNumberCssVars,value:e.formattedValue,delay:e.props.numberAnimationDelay}}):e._e()]:t("span",[e._v(e._s(e.roundValue(e.formattedValue)))]),t("span",{staticClass:"postfix-text"},[e._v(" "+e._s(e.props.postFix)+" ")]),"row-reverse"===e.props.indicatorMetricIcon.direction?t("i",{staticClass:"metric-icon",class:e.indicatorMetricClasses,style:e.indicatorMetricCssStyle}):e._e()],2),e.isHintShownByMetric&&"right"===e.props.positionHint?t("div",{staticClass:"mar-left-l1"},[t("ui-kpi-hint")],1):e._e()]),!e.isLoading&&"left"!==e.props.positionBench&&"top"!==e.props.positionBench&&e.props.showBench?t("div",{style:{...e.styleBench,...e.customBenchStyle,"font-family":e.props.fontBench,"font-size":e.fontSizeBench}},[t("div",{staticClass:"mar-left-2"},["row"===e.props.indicatorBenchmarkIcon.direction?t("i",{staticClass:"benchmark-icon",class:e.indicatorBenchmarkClasses,style:e.indicatorBenchmarkCssStyle}):e._e(),e.props.benchPrefixIcon?t("span",[t("i",{staticClass:"mdi",class:e.props.benchPrefixIcon,style:{color:e.props.benchPrefixIconColor,fontSize:e.props.benchPrefixIconFontSize}})]):e._e(),t("span",{staticClass:"bench-prefix-text"},[e._v(" "+e._s(e.props.benchPreFix+" ")+" ")]),t("span",{staticClass:"benchmark-value"},[e._v(" "+e._s(e.formattedBench)+" ")]),t("span",{staticClass:"bench-postfix-text"},[e._v(" "+e._s(" "+e.props.benchPostFix)+" ")]),"row-reverse"===e.props.indicatorBenchmarkIcon.direction?t("i",{staticClass:"benchmark-icon",class:e.indicatorBenchmarkClasses,style:e.indicatorBenchmarkCssStyle}):e._e()])]):e._e()])])])])])},o=[],r=i(93423),s=i(77500),a=i(37557),l=i(5021),c=i(84562),u=i(14120),p=function(){var e=this,t=e._self._c;return t("span",{staticClass:"numbers",style:e.numberCssVars},[e._v(" "+e._s(e.animatedNumber)+" ")])},d=[];const m={props:{numberCssVars:{type:Object,default:null},metricDigitCapacity:{type:String,default:"n"},digitNumber:{type:String,default:"8"},delay:{type:Number,default:100}},data(){return{animatedNumber:"438",numberInterval:null}},computed:{digitCapacity(){switch(this.metricDigitCapacity){case"n":return"";case"0":return" ";case"1":return".";case"2":return",";default:return""}}},watch:{delay:{handler(){this.clearInterval(),this.createInterval()}}},destroyed(){this.clearInterval(this.numberInterval)},created(){this.createInterval()},methods:{getNewDigitCapacity(e,t){return String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,`$1${t}`)},getRandomArbitrary(){return Math.round(8*Math.random())},clearInterval(){clearInterval(this.numberInterval)},createInterval(){this.numberInterval=setInterval(()=>{let e="";for(let t=0;t<this.digitNumber;t++)e+=this.getRandomArbitrary();this.animatedNumber=this.getNewDigitCapacity(e,this.digitCapacity)},this.delay)}},implicitCssModule:!0},h=m;var f=i(2616),y=i.n(f),b=i(81656);function g(e){this["$style"]=y().locals||y()}var _=(0,b.A)(h,p,d,!1,g,null,null);const v=_.exports;var S=function(){var e=this,t=e._self._c;return t("span",{staticClass:"numbers",style:e.numberCssVars},[e._v(" "+e._s(e.computedValue)+" ")])},w=[];const x={props:{numberCssVars:{type:Object,default:null},value:{type:String,default:"0"},delay:{type:Number,default:100}},data(){return{computedValue:"",numberInterval:null}},watch:{delay:{handler(){clearInterval(this.numberInterval),this.setNumberInterval()}}},destroyed(){clearInterval(this.numberInterval)},created(){this.setNumberInterval()},methods:{setNumberInterval(){const e=parseFloat(this.value);let t=0;this.numberInterval=setInterval(()=>{t+=e>0?1:-1,this.computedValue=String(t),null!=this.numberInterval&&t===e&&clearInterval(this.numberInterval)},this.delay)}},implicitCssModule:!0},C=x;var M=i(38226),I=i.n(M);function k(e){this["$style"]=I().locals||I()}var B=(0,b.A)(C,S,w,!1,k,null,null);const F=B.exports;var N=function(){var e=this,t=e._self._c;return t("w-tooltip",{scopedSlots:e._u([{key:"target",fn:function({events:i,binds:n}){return[t("div",e._g(e._b({staticClass:"kpi-hint icon self-center"},"div",n,!1),i),[t("i",{staticClass:"kpi-hint-icon mdi mdi-help-circle-outline"})])]}},{key:"tooltip",fn:function(){return[t("div",{staticClass:"kpi-tooltip tooltip",style:e.cssVarsStyle},[e._v(" "+e._s(e.text)+" ")])]},proxy:!0}])})},z=[],D=i(2770),A=i(85701),P=i(14093);const R={components:{WTooltip:D.Tooltip},mixins:[(0,A.useComputedWhenMixin)()],inject:["$widget"],computedEditor:{text(){return this.$widget.props.textHint},cssVarsStyle(){return this.$widget.buildCssVarsStyle({tooltip_width:({sizeWidthHint:e,sizeUnitWidthHint:t})=>(0,P.lJ)(e,t),"tooltip_font-size":({sizeHint:e,sizeUnitHint:t})=>(0,P.lJ)(e,t),tooltip_color:"colorHintText","tooltip_bg-color":"bgColorTooltipHint"})}}},V=R;i(39282);var T=(0,b.A)(V,N,z,!1,null,"a002c78c",null);const E=T.exports;var U=i(96652);const $=()=>Promise.all([i.e(4110),i.e(7844),i.e(8017),i.e(1613),i.e(9565),i.e(997)]).then(i.bind(i,43441)),H=()=>Promise.all([i.e(4110),i.e(7844),i.e(8017),i.e(1613),i.e(9565),i.e(997)]).then(i.bind(i,75592)),O=()=>Promise.all([i.e(4110),i.e(7844),i.e(8017),i.e(1613),i.e(9565)]).then(i.bind(i,71291)),L=[$,H,O];i(21587);const j={"title_font-family":"fontTitle","title_font-weight":"titleFontWeight","title_font-size":({sizeTitle:e,sizeUnitTitle:t})=>"string"===typeof e?e:(0,P.lJ)(e,t),title_color:"colorTitle","kpi-data_font-family":"fontMetric","metric_font-weight":"metricFontWeight","prefix-icon_color":"prefixIconColor","prefix-icon_font-size":({prefixIconFontSize:e,prefixIconFontSizeUnit:t})=>(0,P.lJ)(e,t),prefix_color:"prefixColor","prefix_font-family":"prefixFont","prefix_font-weight":"prefixFontWeight","prefix_font-size":"prefixFontSize","prefix_margin-right":"prefixRightMargin",postfix_color:"postfixColor","postfix_font-family":"postfixFont","postfix_font-size":({postfixFontSize:e,postfixFontSizeUnit:t})=>(0,P.lJ)(e,t),"postfix_font-weight":"postfixFontWeight","postfix_margin-left":"postfixLeftMargin","bench-prefix_color":"benchPrefixColor","bench-prefix_font-family":"benchPrefixFont","bench-prefix_font-size":"benchPrefixFontSize","bench-prefix_font-weight":"benchPrefixFontWeight","bench-prefix_margin-right":"benchPrefixRightMargin","bench-postfix_color":"benchPostfixColor","bench-postfix_font-family":"benchPostfixFont","bench-postfix_font-size":"benchPostfixFontSize","bench-postfix_font-weight":"benchPostfixFontWeight","bench-postfix_margin-left":"benchPostfixLeftMargin","bench-value_font-weight":"benchmarkFontWeight","indicator-metric-icon-up_font-size":"indicatorMetricIcon.iconUp.fontSize","indicator-metric-icon-up_color":"indicatorMetricIcon.iconUp.color","indicator-metric-icon--by-rule_font-size":"metricIconRules.fontSize","indicator-metric-icon-down_font-size":"indicatorMetricIcon.iconDown.fontSize","indicator-metric-icon-down_color":"indicatorMetricIcon.iconDown.color","indicator-benchmark-icon-up_font-size":"indicatorBenchmarkIcon.iconUp.fontSize","indicator-benchmark-icon-up_color":"indicatorBenchmarkIcon.iconUp.color","indicator-benchmark-icon-down_font-size":"indicatorBenchmarkIcon.iconDown.fontSize","indicator-benchmark-icon-down_color":"indicatorBenchmarkIcon.iconDown.color","indicator-benchmark-icon_flex-direction":"indicatorBenchmarkIcon.direction","indicator-benchmark-icon--by-rule_font-size":"benchmarkIconRules.fontSize","kpi-hint-icon_color":"colorHint","kpi-hint-icon_font-size":({sizeIcon:e,sizeUnitIcon:t})=>(0,P.lJ)(e,t),"number-animation_height":({sizeMetric:e,sizeUnitMetric:t})=>(0,P.lJ)(e,t)};var W=i(70884);const G=Object.freeze({UPDATE:"update"}),J=()=>({props:{metricDynamicColor:{type:Boolean,default:!0},benchDynamicColor:{type:Boolean,default:!0},varForListen:{type:String,default:""},typeDynamicColor:{type:String,default:"standard"},benchTypeDynamicColor:{type:String,default:"standard"},metricDigitCapacity:{type:String,default:"0"},benchDigitCapacity:{type:String,default:"0"},metricPositiveColor:{type:String,default:"#000000"},benchPositiveColor:{type:String,default:"#000000"},metricNegativeColor:{type:String,default:"#000000"},benchNegativeColor:{type:String,default:"#000000"},preFix:{type:String,default:""},postFix:{type:String,default:""},selectedMetric:{type:String,default:null},selectedBench:{type:String,default:null},metrics:{type:Array,default(){return[]}},type:{type:String,default:"metric"},dimensions:{type:Array,default(){return[]}},selectedDimension:{type:String,default:""},showBench:{default:!1,type:Boolean},colorMetric:{default:"#000000",type:String},colorBench:{default:"rgba(38, 50, 56, 0.6)",type:String},fontMetric:{default:"Roboto, sans-serif",type:String},fontBench:{default:"Roboto, sans-serif",type:String},sizeMetric:{default:"2rem",type:String},sizeBench:{default:"1.2rem",type:String},sizeUnitMetric:{default:"rem",type:String},sizeUnitBench:{default:"rem",type:String},benchmarkFontWeight:{type:String},positionMetric:{default:"left",type:String},showCard:{default:!1,type:Boolean},showTitle:{default:!1,type:Boolean},colorTitle:{default:"#000000",type:String},fontTitle:{default:"Roboto, sans-serif",type:String},sizeTitle:{default:"20px",type:String},sizeUnitTitle:{default:"px",type:String},textTitle:{default:"",type:String},isEntityNameTitle:{type:Boolean,default:!0},backgroundGrad:{type:Boolean,default:!1},backgroundSimpleColor:{type:String,default:"#ffffff"},backgroundGradColor1:{type:String,default:"#ffffff"},backgroundGradColor2:{type:String,default:"#F7F8F9"},backgroundGradPos:{type:String,default:"to bottom"},showHint:{default:!1,type:Boolean},textHint:{default:"",type:String},colorHint:{type:String,default:"#000000"},bgColorTooltipHint:{type:String,default:"#626F86"},positionHint:{type:String,default:"right"},isHintShownByTitle:{type:Boolean,default:!0},width:{type:String,default:""},widthUnit:{type:String,default:""},height:{type:String,default:"100"},heightUnit:{type:String,default:"%"},metricFormat:{type:String,default:""},metricFormatter:{type:String,default:"n"},benchFormat:{type:String,default:""},positionBench:{type:String,default:"bottom"},posRelBench:{type:String,default:"flex-start"},posCenterMetric:{type:Boolean,default:!0},cnpMode:{type:Boolean,default:!1},colorHintText:{type:String,default:"#FFFFFF"},sizeHint:{type:Number,default:.875},sizeUnitHint:{type:String,default:"rem"},sizeIcon:{type:Number,default:.875},sizeUnitIcon:{type:String,default:"rem"},sizeWidthHint:{type:Number,default:300},sizeUnitWidthHint:{type:String,default:"px"},sizeMarginLeft:{type:Number,default:1},sizeUnitMarginLeft:{type:String,default:"px"},turnPadding:{type:Boolean,default:!1},defaultDisabled:{type:Boolean,default:!1},defaultDisabledPlaceholder:{type:String,default:""},conditionMetricStyle:{type:Object,default(){return{type:null,value:"",style:[]}}},conditionBenchStyle:{type:Object,default(){return{type:null,value:"",style:[]}}},defaultValueFontSize:{type:Number,default:.875},defaultValueFontSizeUnit:{type:String,default:"rem"},defaultValueColor:{type:String,default:"#000000"},prefixColor:{type:String,default:"#000000"},prefixFont:{type:String,default:"Roboto, sans-serif"},prefixFontSize:{type:String,default:"1.2rem"},prefixFontSizeUnit:{type:String,default:"rem"},prefixIcon:{type:String,default:""},prefixIconColor:{type:String,default:"#000000"},prefixIconFontSize:{type:Number,default:1.2},prefixIconFontSizeUnit:{type:String,default:"rem"},postfixColor:{type:String,default:"#000000"},postfixFont:{type:String,default:"Roboto, sans-serif"},postfixFontSize:{type:String,default:"1.2rem"},postfixFontSizeUnit:{type:String,default:"rem"},enablePlaceHolder:{type:Boolean,default:!1},textPlaceHolder:{type:String,default:""},typeBenchData:{type:String,default:"metric"},selectedBenchDimension:{type:String,default:""},benchPreFix:{type:String,default:""},benchPostFix:{type:String,default:""},benchPrefixColor:{type:String,default:"#000000"},benchPrefixFont:{type:String,default:"Roboto, sans-serif"},benchPrefixFontSize:{type:String,default:"1rem"},benchPostfixColor:{type:String,default:"#000000"},benchPostfixFont:{type:String,default:"Roboto, sans-serif"},benchPostfixFontSize:{type:String,default:"1rem"},benchPrefixIcon:{type:String,default:""},benchPrefixIconColor:{type:String,default:"#000000"},benchPrefixIconFontSize:{type:String,default:"0.875rem"},prefixFontWeight:{type:String,default:"normal"},postfixFontWeight:{type:String,default:"normal"},benchPrefixFontWeight:{type:String,default:"normal"},benchPostfixFontWeight:{type:String,default:"normal"},isMetricNumber:{type:Boolean,default:!0},showNumberAnimation:{type:Boolean,default:!1},numberAnimationDigits:{type:String,default:"3"},showEditorNumberAnimation:{type:Boolean,default:!1},numberAnimationDelay:{type:Number,default:100},conditionPrefixIconStyle:{type:Object,default(){return{enable:!1,type:null,value:"",style:[]}}},isViewModeAbsolute:{type:Boolean,default:!1},prefixRightMargin:{type:String,default:"0px"},postfixLeftMargin:{type:String,default:"0px"},benchPrefixRightMargin:{type:String,default:"0px"},benchPostfixLeftMargin:{type:String,default:"0px"},metricFontWeight:{type:String,default:"normal"},titleFontWeight:{type:String,default:"normal"},indicatorMetricIcon:{type:Object,default:()=>({isVisible:!1,metricValue:null,targetSource:null,direction:"row-reverse",iconDown:{name:"arrow-down-thin",fontSize:"24px",color:"#F82F58"},iconUp:{name:"arrow-up-thin",fontSize:"24px",color:"#11BA2F"}})},metricIconRules:{type:Object,default:()=>({shouldUseRules:!1,fontSize:"24px",rules:[]})},benchmarkIconRules:{type:Object,default:()=>({shouldUseRules:!0,fontSize:"20px",rules:[]})},indicatorBenchmarkIcon:{type:Object,default:()=>({isVisible:!1,metricValue:null,targetSource:null,direction:"row-reverse",iconDown:{name:"arrow-up-thin",fontSize:"20px",color:"#F82F58"},iconUp:{name:"arrow-up-thin",fontSize:"20px",color:"#11BA2F"}})},isRoundValue:{type:Boolean,default:!1},isAwaitVariableMode:{type:Boolean,default:!1},awaitVariableModeSettings:{type:Object,default:()=>({variables:[]})},shouldCountingNumber:{type:Boolean,default:!1},absoluteHint:{type:Object,default:W.no}},events:{[G.UPDATE]:{listen:"varForListen"}},vars:{},dataset:{vars:{dimension:{operation:r.StoreOperation.ALL}}}}),Y={descriptor:J,panels:L,cssVars:j,isChildAllowed:!1,slotNames:[]},Z=(0,l.useDatasetMeta)(Y,{panel:{isMultiple:!0,mixins:[U.a]}}),K=u.SizeConverter.instance.convertToAbsoluteValue.bind(u.SizeConverter.instance),X=void 0,q=(0,l.useElemDatasetBaseMixin)({panel:!1}),Q={extends:r.Elem,components:{UiKpiHint:E,UiNumberAnimation:v,UiNumberCounting:F},mixins:[q],meta:Z,static:{resolveValueWithUnits:P.lJ},data(){return{formattedValue:0,formattedBench:0,isHovered:!1,target:a.Const.PORTAL_TARGET_NAME_POPUP}},computed:{shouldAnimateNumber(){const{showNumberAnimation:e,showEditorNumberAnimation:t,shouldCountingNumber:i}=this.props,{isLoading:n,formattedValue:o}=this;return!n&&parseFloat(o)&&e&&(t||i)},fontSizeMetric(){const{hasSomeResponseChosenMD:e}=this,{sizeMetric:t,sizeUnitMetric:i,enablePlaceHolder:n,defaultValueFontSize:o}=this.props;return n&&!e?o:"string"===typeof t?t:`${t}${i}`},customStyle(){const{metricDynamicColor:e,conditionMetricStyle:t}=this.props;if(!0===e&&this.hasSomeResponseChosenMD&&!this.isLoading){const e=t?.style??[],i=t?.type??"",n=t?.value??null;let o={...this.defaultColor};const r="METRIC_DIMENSION"===i?this.findMetricValue(this.results,n):n;return e.forEach(e=>{const t=(0,s.A)(P.em,`[${e.type}].handler`,null),i=this.getItemValue(e.value,e.typeCondition);t&&t(Number(r),Number(i))&&(o={...o,...this.cssStrToObj("string"===typeof e.style?e.style:e.style.join(";"))})}),o}return this.defaultColor},customBenchStyle(){if(this.props.benchDynamicColor){const e=(0,s.A)(this.props.conditionBenchStyle,"style",[]),t=(0,s.A)(this.props.conditionBenchStyle,"type",""),i=(0,s.A)(this.props.conditionBenchStyle,"value",null);let n={color:this.props.colorBench};const o="METRIC_DIMENSION"===t?this.findMetricValue(this.results,i):i;return e.forEach(e=>{const t=(0,s.A)(P.em,`[${e.type}].handler`,null),i=this.getItemValue(e.value,e.typeCondition);t&&t(Number(o),Number(i))&&(n={...n,...this.cssStrToObj("string"===typeof e.style?e.style:e.style.join(";"))})}),n}return{color:this.props.colorBench}},prefixIconStyles(){const{enable:e,style:t,type:i,value:n}=this.props.conditionPrefixIconStyle;if(!1===e)return null;const{results:o}=this,r="METRIC_DIMENSION"===i?this.findMetricValue(o,n):n;return t.reduce((e,t)=>{const i=(0,s.A)(P.em,`[${t.type}].handler`,null),n=this.getItemValue(t.value,t.typeCondition);return i&&i(Number(r),Number(n))?{...e,...this.cssStrToObj("string"===typeof t.style?t.style:t.style.join(";"))}:e},{})},hasSomeResponseChosenMD(){const{results:e}=this,{type:t,selectedMetric:i,selectedDimension:n}=this.props,o="metric"===t?i:n;return e.some(({rows:e})=>e.some(e=>void 0!==e[o]))},isAllowedLoadData(){const{isAwaitVariableMode:e,awaitVariableModeSettings:{variables:t}}=this.props;return!e||t.every(e=>null!=this.$storeState[e])},indicatorMetricIconValue(){return this.resolveIconValue(this.props.indicatorMetricIcon)},indicatorBenchmarkIconValue(){return this.resolveIconValue(this.props.indicatorBenchmarkIcon)},foundMetricRule(){const{indicatorMetricIcon:{targetSource:e},metricIconRules:t}=this.props;return this.resolveValueFromRules({targetSource:e,iconValue:this.indicatorMetricIconValue,settings:t})},foundBenchmarkRule(){const{indicatorBenchmarkIcon:{targetSource:e},benchmarkIconRules:t}=this.props;return this.resolveValueFromRules({targetSource:e,iconValue:this.indicatorBenchmarkIconValue,settings:t})},indicatorMetricClasses(){const{indicatorMetricIcon:e,metricIconRules:t}=this.props;return this.resolveIndicatorClasses({settings:e,iconValue:this.indicatorMetricIconValue,iconRules:t,foundRule:this.foundMetricRule,type:"metric"})},indicatorMetricCssStyle(){return null==this.foundMetricRule?{}:{color:this.foundMetricRule.color}},indicatorBenchmarkClasses(){const{indicatorBenchmarkIcon:e,benchmarkIconRules:t}=this.props;return this.resolveIndicatorClasses({settings:e,iconValue:this.indicatorBenchmarkIconValue,iconRules:t,foundRule:this.foundBenchmarkRule,type:"benchmark"})},indicatorBenchmarkCssStyle(){return null==this.foundBenchmarkRule?{}:{color:this.foundBenchmarkRule.color}},isStateEmpty(){const e=Object.values(this.$storeState);return 0===e.length||e.every(e=>null==e)},defaultColor(){const{colorMetric:e,enablePlaceHolder:t,defaultValueColor:i}=this.props,n=t&&!this.hasSomeResponseChosenMD?i:e;return{color:n}}},computedEditor:{absoluteHintCssVars(){const{absoluteHint:e,sizeIcon:t,sizeUnitIcon:i}=this.props,{positionX:n,positionY:o}=e;return this.$genCssVarsStyle({hint_top:this.resolveAbsoluteHintStyleValue({pos:o,size:t,unit:i}),hint_left:this.resolveAbsoluteHintStyleValue({pos:n,size:t,unit:i})})},animatedNumberCssVars(){const{sizeMetric:e,sizeUnitMetric:t,colorMetric:i}=this.props,n=(0,P.lJ)(e,t),o=()=>({"numbers_font-size":()=>n,numbers_color:()=>i,"numbers_line-height":n});return this.$buildCssVarsStyle(o())},metricPrefix(){return`${this.props.preFix} `},title(){const{isEntityNameTitle:e,selectedMetric:t,selectedDimension:i,textTitle:n}=this.props;return e?t||i:n},styleBench(){const{posRelBench:e,positionBench:t}=this.props;return["bottom","top"].includes(t)?{display:"flex",width:"100%","justify-content":e}:{display:"flex","align-items":e}},metricPosition(){const{isViewModeAbsolute:e,posCenterMetric:t,showTitle:i}=this.props;return e&&t?"metric-center":e&&i?"metric-bottom":e?"metric-top":!0===t?"items-center":!0===i?"items-end":""},positionMetric(){switch(this.props.positionMetric){case"left":return"flex-start";case"center":return"center";case"right":return"flex-end";default:return"flex-start"}},fontSizeBench(){const{sizeBench:e,sizeUnitBench:t}=this.props;return"string"===typeof e?e:(0,P.lJ)(e,t)},backgroundColoring(){return this.props.showCard?!1===this.props.backgroundGrad?`background-color:${this.props.backgroundSimpleColor};`:`background: linear-gradient(${this.props.backgroundGradPos}, ${this.props.backgroundGradColor1}, ${this.props.backgroundGradColor2})`:"background-color: transparent"},kpiWrapperClasses(){return{panel:this.props.showCard,"pad-5":!this.props.turnPadding&&!this.props.isViewModeAbsolute,"kpi-no-absolute-mode":!this.props.isViewModeAbsolute}},kpiTitleClasses(){return{"pos-abs":this.props.isViewModeAbsolute,"mar-5":this.props.isViewModeAbsolute}},metricClasses(){return{"mar-5":this.props.isViewModeAbsolute&&!this.props.turnPadding}},isHintShownByMetric(){return this.props.showHint&&this.props.cnpMode},isHintShownByTitle(){return this.props.showHint&&this.props.isHintShownByTitle},isShownHintAbsolute(){const{absoluteHint:e,showHint:t}=this.props;return t&&e.isEnabled}},watchEditor:{props:{handler(){this.buildRenderData()}},"props.isAwaitVariableMode":{handler(){this.isAllowedLoadData&&this.loadData()}}},subscribe:[{event:G.UPDATE,handler(){this.isAllowedLoadData&&this.loadData()}}],methods:{...l.ElemDatasetBaseMixinTypes,resolveAbsoluteHintStyleValue({pos:e,size:t,unit:i}){const n=Math.floor(K({size:(0,P.lJ)(t,i)})),o=Math.floor(100*K({size:`${e}%`})/2);return o<=n/2?"0%":`calc(${e-1}% - ${n}px)`},buildRenderData(){this.buildMetricValue(),this.buildBenchValue()},buildMetricValue(){const{props:{defaultDisabled:e,defaultDisabledPlaceholder:t,enablePlaceHolder:i,type:n,selectedMetric:o,selectedDimension:r,metricFormat:s,textPlaceHolder:a},results:l,hasSomeResponseChosenMD:c}=this;if(this.formattedValue=0,e&&this.isStateEmpty)this.formattedValue=t;else if(!e||c||!1!==this.checkCountRows(l)){if(c){const{metricFormatter:e=null}=this.props,t=(0,P.e6)(e,s),i=this.getDatasetsValue("metric"===n?o:r);return void(this.formattedValue=this.getFormattedValue({value:i,format:t}))}!0===i&&(this.formattedValue=a)}else this.formattedValue=t},findMetricValue(e=[],t){for(const{rows:i}of e){const e=i.find(e=>null!=e[t]);if(null!=e)return e[t]}return null},buildBenchValue(){const{hasSomeResponseChosenMD:e}=this,{showBench:t,selectedBench:i,selectedBenchDimension:n,typeBenchData:o,benchFormat:r}=this.props;if(!t||!1!==(i||n)){if(e){const{formatterBench:e=null}=this.props,t=(0,P.e6)(e,r),s="metric"===o?i:n,a=this.getDatasetsValue(s);return void(this.formattedBench=this.getFormattedValue({value:a,format:t,isBench:!0}))}this.formattedBench=0}},async loadData(e=this.requests){if(!1!==this.isAllowedLoadData){this.isLoading=!0,this.$requestCancel(e);try{const t=await Promise.all(e.map(e=>e?.send()));this.results=t.map((e,t)=>e??this.results[t]??null),this.buildRenderData()}catch(t){this.results=[],this.$handleError(t)}finally{this.isLoading=!1}}},checkCountRows(e=[]){return e.some(e=>(0,s.A)(e,"rows.length",0)>0)},cssStrToObj(e){return null==e||""===e?{}:e.split(";").reduce((e,t)=>{const i=t.split(":").map(e=>e.trim());return 2===i.length&&(e[i[0]]=this.$c(i[1])),e},{})},getDatasetsValue(e){return 0===this.results.length||["",null,void 0].includes(e)?0:this.results.reduce((t,{rows:i})=>{const[n]=i;return e in n===!1?t:n[e]},0)},getFormattedValue({value:e,format:t="",isBench:i=!1}){if(null===e&&this.isPlaceholder(i))return this.getPlaceholder(i);if(this.props.isRoundValue&&!i)return e;if(this.props.isMetricNumber||i){const i=Number(e);return Number.isNaN(i)?e:(0,c.ZV)(i,t)}return e},roundValue(e){if(""===e||null==e)return 0;const{isMetricNumber:t,defaultDisabled:i,enablePlaceHolder:n}=this.props,o=this.props.isRoundValue,r=n&&!1===this.checkCountRows(this.results),s=i&&this.isStateEmpty,a=Number.isNaN(Number(e))||!Number.isFinite(Number(e));if(!t||!o||s||r||a)return e;const l=parseFloat(e);if(0===l)return l;const u=Math.abs(l),p=e=>(0,c.ZV)(l,e);return p(u>=1?"0||/d":u>=.1&&u<1?"1||/d":u>=.01&&u<.1?"2||/d":"3||/d")},getItemValue(e,t){const i=t?t.toLowerCase():"";if("metric"===i||"dimension"===i)return this.getDatasetsValue(e);const n=Number(e);return Number.isNaN(n)?null:n},isPlaceholder(e){return!e&&this.props.enablePlaceHolder},getPlaceholder(e){return e?"":this.props.textPlaceHolder},resolveIndicatorClasses({settings:e,iconValue:t,foundRule:i,iconRules:n,type:o}){if(null==t)return"";const{iconDown:r,iconUp:s}=e,{shouldUseRules:a}=n;return a?`mdi-${i?.icon} ${o}-icon--by-rule`:t>0?`mdi-${s.name} ${o}-icon--up`:`mdi-${r.name} ${o}-icon--down`},resolveIconValue(e){const{isVisible:t,metricValue:i,targetSource:n}=e;if(!t||null==i||null==n)return null;try{return this.results[n]?.rows[0][i]}catch(o){return null}},resolveValueFromRules({targetSource:e,iconValue:t,settings:i}){if(null==t)return null;const{shouldUseRules:n,rules:o}=i;return n?this.findRule({rules:o,value:t,targetSource:e}):null},findRule({rules:e,value:t,targetSource:i}){return e.find(e=>{const n=(0,s.A)(P.em,`[${e.condition}].handler`,null),o=this.results[i].rows[0][e.value],r=e.dataType===W.BL.VALUE?e.value:o;return n&&n(Number(t),Number(r))})},onWidgetClick(){const{type:e,selectedMetric:t,selectedDimension:i,typeBenchData:n,selectedBench:o,selectedBenchDimension:r}=this.props,s="metric"===e?t:i,a="metric"===n?o:r,l={[s]:this.getDatasetsValue(s),[a]:this.getDatasetsValue(a)};this.$storeCommit(l)},...X},implicitCssModule:!0},ee=Q;var te=i(64273),ie=i.n(te);function ne(e){this["$style"]=ie().locals||ie()}var oe=(0,b.A)(ee,n,o,!1,ne,null,null);const re=oe.exports},29842:(e,t,i)=>{i.d(t,{A:()=>p});var n=i(5021),o=i(14093),r=i(70884),s=i(21587);const a=Object.keys(o.DI).map(e=>({label:o.DI[e].name,value:e})),l=Object.entries(o.K9).reduce((e,[t,{name:i,options:n}])=>[...e,{label:i,value:t,options:n}],[{label:"-",value:null}]),c=Object.keys(o.em).map(e=>({label:o.em[e].name,value:e})),u=Object.keys(o.eC).map(e=>({label:o.eC[e].name,value:e})),p={mixins:[(0,n.usePanelDatasetMixin)()],static:{units:s.SizeUnits,FormatOptions:r.e,RuleDataTypeOptions:r.NT,RuleDataType:r.BL,IconPositionOptions:r.nS,TypeDataOptions:r.Rc,DigitCapacityOptions:r.Ip,FontWeightOptions:s.FontWeightOptions,PARAM_STYLE_FACTORY:o.PL,MetricParamTypes:a,MetricParamFormats:l,MetricParamStyleTypes:c,MetricSeparateParamTypes:u},computed:{dimensionsMetricsByDataset(){return this.queryModels.map(e=>{const{metrics:t=[],dimensions:i=[]}=e;return[{value:null,label:"-"},...t,...i]})},datasetOptions(){return[{value:null,label:"-"},...this.datasetRequests.map(({name:e},t)=>({value:t,label:e}))]}},methods:{...n.PanelDatasetMixinTypes,setFontSize(e,t,i,{value:n,unit:o}){this.props[e]=n,this.props[t]=o,this.propChanged([e,t])}}}},34996:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(31601),o=i.n(n),r=i(76314),s=i.n(r),a=s()(o());a.push([e.id,".style_absolute-hint_E6Jsr{top:var(--w-hint_top);left:var(--w-hint_left);z-index:1}.style_kpi-no-absolute-mode__sHja{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.style_kpi-data__GBuf,.style_kpi-no-absolute-mode__sHja{display:-webkit-box;display:flex}.style_kpi-data__GBuf{width:100%;font-weight:var(--w-metric_font-weight);font-family:var(--w-kpi-data_font-family)}.style_metric-center_Yx3oH{-webkit-box-align:center;align-items:center}.style_metric-bottom_CZKJG{-webkit-box-align:end;align-items:flex-end}.style_metric-top_PnwAS{top:0;left:0}.style_kpi-title_sucs6{text-overflow:ellipsis;display:-webkit-box;display:flex;overflow:hidden;font-weight:var(--w-title_font-weight);font-family:var(--w-title_font-family);font-size:var(--w-title_font-size);color:var(--w-title_color)}.style_prefix-icon_G4WQh{color:var(--w-prefix-icon_color);font-size:var(--w-prefix-icon_font-size)}.style_prefix-text_KmE47{color:var(--w-prefix_color);font-family:var(--w-prefix_font-family);font-weight:var(--w-prefix_font-weight);font-size:var(--w-prefix_font-size);margin-right:var(--w-prefix_margin-right)}.style_postfix-text_Ii4zB{color:var(--w-postfix_color);font-family:var(--w-postfix_font-family);font-size:var(--w-postfix_font-size);font-weight:var(--w-postfix_font-weight);margin-left:var(--w-postfix_margin-left)}.style_bench-prefix-text_FhjSG{color:var(--w-bench-prefix_color);font-family:var(--w-bench-prefix_font-family);font-size:var(--w-bench-prefix_font-size);font-weight:var(--w-bench-prefix_font-weight);margin-right:var(--w-bench-prefix_margin-right)}.style_bench-postfix-text_MSDcZ{color:var(--w-bench-postfix_color);font-family:var(--w-bench-postfix_font-family);font-size:var(--w-bench-postfix_font-size);font-weight:var(--w-bench-postfix_font-weight);margin-left:var(--w-bench-postfix_margin-left)}.style_metric-top-position_YM4p4{top:0;left:0}.style_metric-absolute-position_RhxeJ{position:absolute;top:0;left:0}.style_metric-icon_RXphC{}.style_metric-icon--up_HwFZm{font-size:var(--w-indicator-metric-icon-up_font-size);color:var(--w-indicator-metric-icon-up_color)}.style_metric-icon--down_QxZgB{font-size:var(--w-indicator-metric-icon-down_font-size);color:var(--w-indicator-metric-icon-down_color)}.style_metric-icon--by-rule_yCq5R{font-size:var(--w-indicator-metric-icon--by-rule_font-size)}.style_benchmark-value_tzOdt{font-weight:var(--w-bench-value_font-weight)}.style_benchmark-icon_EgRCh{}.style_benchmark-icon--up_vmsPR{font-size:var(--w-indicator-benchmark-icon-up_font-size);color:var(--w-indicator-benchmark-icon-up_color)}.style_benchmark-icon--down_kfX5i{font-size:var(--w-indicator-benchmark-icon-down_font-size);color:var(--w-indicator-benchmark-icon-down_color)}.style_benchmark-icon--by-rule_K_E1Y{font-size:var(--w-indicator-benchmark-icon--by-rule_font-size)}.style_number-animation_Hrlii{height:var(--w-number-animation_height)}",""]),a.locals={"absolute-hint":"style_absolute-hint_E6Jsr pos-abs","kpi-no-absolute-mode":"style_kpi-no-absolute-mode__sHja","kpi-data":"style_kpi-data__GBuf","metric-center":"style_metric-center_Yx3oH pos-abs pos-center","metric-bottom":"style_metric-bottom_CZKJG pos-abs pos-bot-center","metric-top":"style_metric-top_PnwAS","kpi-title":"style_kpi-title_sucs6","prefix-icon":"style_prefix-icon_G4WQh","prefix-text":"style_prefix-text_KmE47","postfix-text":"style_postfix-text_Ii4zB","bench-prefix-text":"style_bench-prefix-text_FhjSG","bench-postfix-text":"style_bench-postfix-text_MSDcZ","metric-top-position":"style_metric-top-position_YM4p4","metric-absolute-position":"style_metric-absolute-position_RhxeJ","metric-icon":"style_metric-icon_RXphC mdi","metric-icon--up":"style_metric-icon--up_HwFZm","metric-icon--down":"style_metric-icon--down_QxZgB","metric-icon--by-rule":"style_metric-icon--by-rule_yCq5R","benchmark-value":"style_benchmark-value_tzOdt","benchmark-icon":"style_benchmark-icon_EgRCh mdi","benchmark-icon--up":"style_benchmark-icon--up_vmsPR","benchmark-icon--down":"style_benchmark-icon--down_kfX5i","benchmark-icon--by-rule":"style_benchmark-icon--by-rule_K_E1Y","number-animation":"style_number-animation_Hrlii"};const l=a},38226:(e,t,i)=>{var n=i(25711);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(99548).A;o("8f1564dc",n,!0,{sourceMap:!1,shadowMode:!1})},39282:(e,t,i)=>{var n=i(45740);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(99548).A;o("62d982e4",n,!0,{sourceMap:!1,shadowMode:!1})},45119:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(31601),o=i.n(n),r=i(76314),s=i.n(r),a=s()(o());a.push([e.id,".NumberAnimation_numbers_hfGsJ{line-height:var(--w-numbers_line-height);white-space:normal;display:-webkit-inline-box;display:inline-flex;font-size:var(--w-numbers_font-size);color:var(--w-numbers_color)}.NumberAnimation_numbers-window_I0Abv{display:inline-block;overflow:hidden;height:1em}.NumberAnimation_numbers-window-symbol_tslxc{font:inherit;overflow:inherit}@-webkit-keyframes NumberAnimation_counting_v0WtE{to{-webkit-transform:translate3d(0,-10em,0);transform:translate3d(0,-10em,0)}}@keyframes NumberAnimation_counting_v0WtE{to{-webkit-transform:translate3d(0,-10em,0);transform:translate3d(0,-10em,0)}}",""]),a.locals={numbers:"NumberAnimation_numbers_hfGsJ","numbers-window":"NumberAnimation_numbers-window_I0Abv","numbers-window-symbol":"NumberAnimation_numbers-window-symbol_tslxc",counting:"NumberAnimation_counting_v0WtE"};const l=a},45740:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(31601),o=i.n(n),r=i(76314),s=i.n(r),a=s()(o());a.push([e.id,".kpi-tooltip[data-v-a002c78c]{width:var(--w-tooltip_width);font-size:var(--w-tooltip_font-size);color:var(--w-tooltip_color);background-color:var(--w-tooltip_bg-color)}.kpi-hint[data-v-a002c78c]{white-space:pre-wrap;line-height:1}.kpi-hint-icon[data-v-a002c78c]{color:var(--w-kpi-hint-icon_color);font-size:var(--w-kpi-hint-icon_font-size)}",""]);const l=a},64273:(e,t,i)=>{var n=i(34996);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=i(99548).A;o("bd7ad0c2",n,!0,{sourceMap:!1,shadowMode:!1})},70884:(e,t,i)=>{i.d(t,{BL:()=>c,Ip:()=>a,NT:()=>u,Rc:()=>n,e:()=>s,j0:()=>r,k9:()=>o,nS:()=>l,no:()=>p});const n=[{value:"dimension",label:"Измерение"},{value:"metric",label:"Метрика"}],o=[{value:"left",label:"Слева"},{value:"center",label:"По центру"},{value:"right",label:"Справа"}],r=[{value:"left",label:"Слева"},{value:"top",label:"Сверху"},{value:"right",label:"Справа"},{value:"bottom",label:"Снизу"}],s=[{value:"n",label:"Без формата"},{value:"0",label:"1000"},{value:"1",label:"1000,1"},{value:"2",label:"1000,12"},{value:"0%",label:"12%"},{value:"1%",label:"12,3%"},{value:"2%",label:"12,34%"}],a=[{value:"n",label:"Без формата"},{value:"0",label:"10 000"},{value:"1",label:"10.000"},{value:"2",label:"10,000"}],l=[{value:"row",label:"Слева"},{value:"row-reverse",label:"Справа"}],c={VALUE:"value",FROM_DATASET:"metric/dimension"},u=[{label:"Ввод",value:c.VALUE},{label:"Метрика/измерение",value:c.FROM_DATASET}],p=()=>({isEnabled:!1,positionX:50,positionY:50})},74532:(e,t,i)=>{i.d(t,{A:()=>h});var n=function(){var e=this,t=e._self._c;return t("ui-container",[t("ui-switch",{on:{change:e.updateSettingsModel},model:{value:e.iconSettings.shouldUseRules,callback:function(t){e.$set(e.iconSettings,"shouldUseRules",t)},expression:"iconSettings.shouldUseRules"}},[e._v("Иконка по условию")]),e.iconSettings.shouldUseRules?[t("ui-input-units",{staticClass:"p",attrs:{units:e.SizeUnits},on:{change:e.updateSettingsModel},model:{value:e.iconSettings.fontSize,callback:function(t){e.$set(e.iconSettings,"fontSize",t)},expression:"iconSettings.fontSize"}},[e._v(" Размер ")]),e._l(e.iconSettings.rules,function(i,n){return t("ui-collapse",{key:n,staticClass:"p",scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Условие "+e._s(n+1))]},proxy:!0}],null,!0)},[t("ui-select",{staticClass:"p",attrs:{options:e.RuleDataTypeOptions},on:{change:e.updateSettingsModel},model:{value:i.dataType,callback:function(t){e.$set(i,"dataType",t)},expression:"rule.dataType"}},[e._v(" Тип данных ")]),t("ui-has-two-columns",{staticClass:"p",scopedSlots:e._u([{key:"left",fn:function(){return[t("ui-select",{attrs:{options:e.conditionOptions},on:{change:e.updateSettingsModel},model:{value:i.condition,callback:function(t){e.$set(i,"condition",t)},expression:"rule.condition"}},[e._v(" Условие ")])]},proxy:!0},{key:"right",fn:function(){return[i.dataType===e.RuleDataType.VALUE?t("ui-input",{on:{change:e.updateSettingsModel},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"rule.value"}},[e._v(" Значение ")]):t("ui-select",{attrs:{options:e.metrics},on:{change:e.updateSettingsModel},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"rule.value"}},[e._v(" Значение ")])]},proxy:!0}],null,!0)}),t("ui-input",{staticClass:"p",on:{change:e.updateSettingsModel},model:{value:i.icon,callback:function(t){e.$set(i,"icon",t)},expression:"rule.icon"}},[e._v("Название иконки")]),t("ui-input-cp",{staticClass:"p",on:{change:e.updateSettingsModel},model:{value:i.color,callback:function(t){e.$set(i,"color",t)},expression:"rule.color"}},[e._v("Цвет")]),t("ui-button",{attrs:{type:"error"},on:{click:function(t){return e.removeMetricIconRule(n)}}},[e._v("Удалить")])],1)}),t("ui-button",{attrs:{type:"ghost"},on:{click:e.addMetricIconRule}},[e._v("Добавить условие")])]:[t("ui-panel",{attrs:{groups:[{name:"Прирост",slot:"icon-up"},{name:"Снижение",slot:"icon-down"}]},scopedSlots:e._u([{key:"icon-up",fn:function(){return[t("ui-input",{staticClass:"p",on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconUp.name,callback:function(t){e.$set(e.indicatorIconModel.iconUp,"name",t)},expression:"indicatorIconModel.iconUp.name"}},[e._v(" Название ")]),t("ui-input-units",{staticClass:"p",attrs:{units:e.SizeUnits},on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconUp.fontSize,callback:function(t){e.$set(e.indicatorIconModel.iconUp,"fontSize",t)},expression:"indicatorIconModel.iconUp.fontSize"}},[e._v(" Размер ")]),t("ui-input-cp",{on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconUp.color,callback:function(t){e.$set(e.indicatorIconModel.iconUp,"color",t)},expression:"indicatorIconModel.iconUp.color"}},[e._v(" Цвет ")])]},proxy:!0},{key:"icon-down",fn:function(){return[t("ui-input",{staticClass:"p",on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconDown.name,callback:function(t){e.$set(e.indicatorIconModel.iconDown,"name",t)},expression:"indicatorIconModel.iconDown.name"}},[e._v(" Название ")]),t("ui-input-units",{staticClass:"p",attrs:{units:e.SizeUnits},on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconDown.fontSize,callback:function(t){e.$set(e.indicatorIconModel.iconDown,"fontSize",t)},expression:"indicatorIconModel.iconDown.fontSize"}},[e._v(" Размер ")]),t("ui-input-cp",{on:{change:e.updateIndicatorIconModel},model:{value:e.indicatorIconModel.iconDown.color,callback:function(t){e.$set(e.indicatorIconModel.iconDown,"color",t)},expression:"indicatorIconModel.iconDown.color"}},[e._v(" Цвет ")])]},proxy:!0}],null,!1,843463465)})]],2)},o=[],r=i(20903),s=i(60997),a=i(21587),l=i(70884),c=i(14093);const u={components:{...s.PanelUi},props:{settings:{type:Object,required:!0},indicatorIcon:{type:Object,required:!0},metrics:{type:Array,default:()=>[]}},static:{RuleDataTypeOptions:l.NT,RuleDataType:l.BL,SizeUnits:a.SizeUnits},data(){return{iconSettings:null,indicatorIconModel:null}},computed:{conditionOptions(){return Object.keys(c.em).map(e=>({label:c.em[e].name,value:e}))}},watch:{settings:{handler(e){this.iconSettings=(0,r.A)(e)},immediate:!0},indicatorIcon:{handler(e){this.indicatorIconModel=(0,r.A)(e)},immediate:!0}},methods:{addMetricIconRule(){const{rules:e}=this.iconSettings;e.push({dataType:l.BL.FROM_DATASET,condition:"",value:null,icon:"",color:"#000"}),this.updateSettingsModel()},removeMetricIconRule(e){const{rules:t}=this.iconSettings;t.splice(e,1),this.updateSettingsModel()},updateSettingsModel(){this.$emit("settings-changed",this.iconSettings)},updateIndicatorIconModel(){this.$emit("indicator-icon-changed",this.indicatorIconModel)}}},p=u;var d=i(81656),m=(0,d.A)(p,n,o,!1,null,null,null);const h=m.exports},77081:(e,t,i)=>{i.d(t,{R:()=>n});const n=[{value:"left",label:"слева"},{value:"right",label:"справа"}]},88148:(e,t,i)=>{i.d(t,{A:()=>p});var n=function(){var e=this,t=e._self._c;return t("ui-panel-container",[t("ui-has-two-columns",{staticClass:"p",scopedSlots:e._u([{key:"left",fn:function(){return[t("ui-select",{attrs:{options:e.paramTypes},on:{input:()=>{e.paramEdit.value="",e.changed()}},model:{value:e.paramEdit.type,callback:function(t){e.$set(e.paramEdit,"type",t)},expression:"paramEdit.type"}},[e._v(" Тип данных ")])]},proxy:!0},{key:"right",fn:function(){return["METRIC_DIMENSION"===e.paramEdit.type?t("ui-select",{attrs:{options:e.dimensionMetricNames},on:{input:e.changed},model:{value:e.paramEdit.value,callback:function(t){e.$set(e.paramEdit,"value",t)},expression:"paramEdit.value"}},[e._v(" Значение ")]):t("ui-input",{on:{input:e.changed},model:{value:e.paramEdit.value,callback:function(t){e.$set(e.paramEdit,"value",t)},expression:"paramEdit.value"}},[e._v("Значение")])]},proxy:!0}])}),e._l(e.paramEdit.style,function(i,n){return t("ui-collapse",{key:`cond-${n}`,staticClass:"p",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(e._s(`Условие ${n+1}`))]},proxy:!0}],null,!0)},[t("ui-select",{staticClass:"p",attrs:{options:e.separateParamTypes},on:{input:e.changed},model:{value:i.typeCondition,callback:function(t){e.$set(i,"typeCondition",t)},expression:"styleItem.typeCondition"}},[e._v(" Тип данных ")]),t("ui-has-two-columns",{staticClass:"p",scopedSlots:e._u([{key:"left",fn:function(){return[t("ui-select",{attrs:{options:e.paramStyleTypes},on:{input:e.changed},model:{value:i.type,callback:function(t){e.$set(i,"type",t)},expression:"styleItem.type"}},[e._v("Условие")])]},proxy:!0},{key:"right",fn:function(){return["METRIC"===i.typeCondition||"DIMENSION"===i.typeCondition?t("ui-select",{attrs:{options:e.dimensionMetricNames},on:{input:e.changed},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"styleItem.value"}},[e._v(" значение ")]):t("ui-input",{on:{input:e.changed},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"styleItem.value"}},[e._v("значение")])]},proxy:!0}],null,!0)}),t("ui-input-tags",{staticClass:"p",attrs:{value:e.resolveStyleValue(i.style),valueFilter:e.filterStyleValue},on:{change:t=>e.changedStyle(t,n)}},[e._v(" Стиль ")]),t("ui-button",{attrs:{type:"error"},on:{click:function(t){return e.deleteStyleItem(n)}}},[e._v("Удалить")])],1)}),t("ui-button",{attrs:{type:"ghost"},on:{click:e.addStyleItem}},[e._v("Добавить условие")])],2)},o=[],r=i(20903),s=i(18878);const a={components:{...s},props:{param:{type:Object,default(){return null}},paramTypes:{type:Array,default(){return[]}},paramFormats:{type:Array,default(){return[]}},paramStyleTypes:{type:Array,default(){return[]}},paramStyleFactory:{type:Function,default(){return null}},dimensionMetricNames:{type:Array,default(){return[]}},separateParamTypes:{type:Array,default(){return[]}}},data(){return{paramEdit:null}},watch:{param:{handler(e){this.paramEdit=(0,r.A)(e)},immediate:!0},"paramEdit.format":{handler(e){this.paramEdit.formatOpt={},this.changed()}}},methods:{changed(){this.$emit("change",this.paramEdit)},addStyleItem(){this.paramEdit.style.push(this.paramStyleFactory()),this.changed()},deleteStyleItem(e){this.paramEdit.style.splice(e,1),this.changed()},changedStyle(e,t){this.paramEdit.style[t].style=e,this.changed()},resolveStyleValue(e){return"string"===typeof e?e.split("; "):e},filterStyleValue(e,t){return t.filter((t,i,n)=>t&&n.indexOf(t)===i&&!e.includes(t))}}},l=a;var c=i(81656),u=(0,c.A)(l,n,o,!1,null,null,null);const p=u.exports},96652:(e,t,i)=>{i.d(t,{a:()=>a});var n=i(20903),o=i(46996),r=i(14093),s=i(70884);const a={watch:{dimensionsMetrics:{handler(){const{dimensions:e,metrics:t}=this;this.setPropsDefaults({dimensions:e,metrics:t})},immediate:!0}},created(){this.$watch(`props.${this.DATASET_PROP}`,this.metricFormatterHack,{deep:!0})},methods:{metricFormatterHack(e,t){(0,o.A)(e,t)||"n"===this.props.metricFormatter&&(this.props.metricFormatter=null,this.propChanged("metricFormatter"))},setPropsDefaults({metrics:e=[],dimensions:t=[]}){e.length>0?this.setPropDefaultsByMetrics(e):t.length>0&&this.setPropsDefaultsByDimensions(t)},setPropDefaultsByMetrics(e){const{props:t}=this,i=(0,n.A)(t),[r,s]=e;t.selectedMetric??=r,t.indicatorMetricIcon.targetSource??=0,t.indicatorMetricIcon.metricValue??=r,t.selectedBench??=s??null,t.indicatorBenchmarkIcon.targetSource??=0,t.indicatorBenchmarkIcon.metricValue??=r,null==t.conditionBenchStyle.type&&this.createDefaultConditionBenchStyle(t,[r,s],"METRIC"),0===t.benchmarkIconRules.rules.length&&this.createDefaultBenchIconRules(t,s),!1===(0,o.A)(i,t)&&this.propChanged()},setPropsDefaultsByDimensions(e){const{props:t}=this,i=(0,n.A)(t),[r,s]=e;t.type="dimension",t.selectedDimension??=r,t.indicatorMetricIcon.targetSource??=0,t.indicatorMetricIcon.metricValue??=r,t.typeBenchData="dimension",t.selectedBenchDimension??=s??null,t.indicatorBenchmarkIcon.targetSource??=0,t.indicatorBenchmarkIcon.metricValue??=r,null==t.conditionBenchStyle.type&&this.createDefaultConditionBenchStyle(t,[r,s],"DIMENSION"),0===t.benchmarkIconRules.rules.length&&this.createDefaultBenchIconRules(t,s),!1===(0,o.A)(i,t)&&this.propChanged()},createDefaultConditionBenchStyle(e,[t,i=null],n){e.conditionBenchStyle.type="METRIC_DIMENSION",e.conditionBenchStyle.value=t,e.conditionBenchStyle.style=[(0,r.PL)({typeCondition:n,type:"GT",value:i,style:"color: #11BA2F;"}),(0,r.PL)({typeCondition:n,type:"LT",value:i,style:"color: #F82F58;"})]},createDefaultBenchIconRules(e,t){e.benchmarkIconRules.rules=[(0,r.$d)({dataType:s.BL.FROM_DATASET,condition:"GT",value:t,icon:"arrow-up-thin",color:"#11BA2F"}),(0,r.$d)({dataType:s.BL.FROM_DATASET,condition:"LT",value:t,icon:"arrow-down-thin",color:"#F82F58"})]}}}}};