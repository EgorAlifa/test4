export const __webpack_id__=2929;export const __webpack_ids__=[2929];export const __webpack_modules__={86059:(t,e,n)=>{n.d(e,{AL:()=>Et,D8:()=>ct,GU:()=>I,JD:()=>P,L0:()=>tt,LF:()=>Vt,RC:()=>J,_G:()=>st,aR:()=>Z,gC:()=>q,gR:()=>O,i4:()=>nt,iS:()=>rt,kG:()=>at,rP:()=>K,rn:()=>k,w7:()=>Q});var o,l,r=n(42845),s=n(42225),i=n(1575),c=n(14413),a=n(38262);if("undefined"!=typeof WeakMap){let t=new WeakMap;o=e=>t.get(e),l=(e,n)=>(t.set(e,n),n)}else{const t=[],e=10;let n=0;o=e=>{for(let n=0;n<t.length;n+=2)if(t[n]==e)return t[n+1]},l=(o,l)=>(n==e&&(n=0),t[n++]=o,t[n++]=l)}var d=class{constructor(t,e,n,o){this.width=t,this.height=e,this.map=n,this.problems=o}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const o=e%this.width,l=e/this.width|0;let r=o+1,s=l+1;for(let t=1;r<this.width&&this.map[e+t]==n;t++)r++;for(let t=1;s<this.height&&this.map[e+this.width*t]==n;t++)s++;return{left:o,top:l,right:r,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:o,right:l,top:r,bottom:s}=this.findCell(t);return"horiz"==e?(n<0?0==o:l==this.width)?null:this.map[r*this.width+(n<0?o-1:l)]:(n<0?0==r:s==this.height)?null:this.map[o+this.width*(n<0?r-1:s)]}rectBetween(t,e){const{left:n,right:o,top:l,bottom:r}=this.findCell(t),{left:s,right:i,top:c,bottom:a}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(l,c),right:Math.max(o,i),bottom:Math.max(r,a)}}cellsInRect(t){const e=[],n={};for(let o=t.top;o<t.bottom;o++)for(let l=t.left;l<t.right;l++){const r=o*this.width+l,s=this.map[r];n[s]||(n[s]=!0,l==t.left&&l&&this.map[r-1]==s||o==t.top&&o&&this.map[r-this.width]==s||e.push(s))}return e}positionAt(t,e,n){for(let o=0,l=0;;o++){const r=l+n.child(o).nodeSize;if(o==t){let n=e+t*this.width;const o=(t+1)*this.width;while(n<o&&this.map[n]<l)n++;return n==o?r-1:this.map[n]}l=r}}static get(t){return o(t)||l(t,h(t))}};function h(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);const e=p(t),n=t.childCount,o=[];let l=0,r=null;const s=[];for(let a=0,d=e*n;a<d;a++)o[a]=0;for(let a=0,d=0;a<n;a++){const i=t.child(a);d++;for(let t=0;;t++){while(l<o.length&&0!=o[l])l++;if(t==i.childCount)break;const c=i.child(t),{colspan:h,rowspan:p,colwidth:f}=c.attrs;for(let t=0;t<p;t++){if(t+a>=n){(r||(r=[])).push({type:"overlong_rowspan",pos:d,n:p-t});break}const i=l+t*e;for(let t=0;t<h;t++){0==o[i+t]?o[i+t]=d:(r||(r=[])).push({type:"collision",row:a,pos:d,n:h-t});const n=f&&f[t];if(n){const o=(i+t)%e*2,l=s[o];null==l||l!=n&&1==s[o+1]?(s[o]=n,s[o+1]=1):l==n&&s[o+1]++}}}l+=h,d+=c.nodeSize}const c=(a+1)*e;let h=0;while(l<c)0==o[l++]&&h++;h&&(r||(r=[])).push({type:"missing",row:a,n:h}),d++}0!==e&&0!==n||(r||(r=[])).push({type:"zero_sized"});const i=new d(e,n,o,r);let c=!1;for(let a=0;!c&&a<s.length;a+=2)null!=s[a]&&s[a+1]<n&&(c=!0);return c&&f(i,s,t),i}function p(t){let e=-1,n=!1;for(let o=0;o<t.childCount;o++){const l=t.child(o);let r=0;if(n)for(let e=0;e<o;e++){const n=t.child(e);for(let t=0;t<n.childCount;t++){const l=n.child(t);e+l.attrs.rowspan>o&&(r+=l.attrs.colspan)}}for(let t=0;t<l.childCount;t++){const e=l.child(t);r+=e.attrs.colspan,e.attrs.rowspan>1&&(n=!0)}-1==e?e=r:e!=r&&(e=Math.max(e,r))}return e}function f(t,e,n){t.problems||(t.problems=[]);const o={};for(let l=0;l<t.map.length;l++){const r=t.map[l];if(o[r])continue;o[r]=!0;const s=n.nodeAt(r);if(!s)throw new RangeError(`No cell with offset ${r} found`);let i=null;const c=s.attrs;for(let n=0;n<c.colspan;n++){const o=(l+n)%t.width,r=e[2*o];null==r||c.colwidth&&c.colwidth[n]==r||((i||(i=u(c)))[n]=r)}i&&t.problems.unshift({type:"colwidth mismatch",pos:r,colwidth:i})}}function u(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function m(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const o=t.nodes[n],l=o.spec.tableRole;l&&(e[l]=o)}}return e}var w=new r.hs("selectingCells");function g(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function b(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}function C(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function v(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&"cell"==e.node.type.spec.tableRole)return e.$anchor;const n=g(e.$head)||y(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function y(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n-e.nodeSize)}}function S(t){return"row"==t.parent.type.spec.tableRole&&!!t.nodeAfter}function A(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function $(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function N(t,e,n){const o=t.node(-1),l=d.get(o),r=t.start(-1),s=l.nextCell(t.pos-r,e,n);return null==s?null:t.node(0).resolve(r+s)}function M(t,e,n=1){const o={...t,colspan:t.colspan-n};return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(e,n),o.colwidth.some(t=>t>0)||(o.colwidth=null)),o}function R(t,e,n=1){const o={...t,colspan:t.colspan+n};if(o.colwidth){o.colwidth=o.colwidth.slice();for(let t=0;t<n;t++)o.colwidth.splice(e,0,0)}return o}function z(t,e,n){const o=m(e.type.schema).header_cell;for(let l=0;l<t.height;l++)if(e.nodeAt(t.map[n+l*t.width]).type!=o)return!1;return!0}var k=class t extends r.LN{constructor(t,e=t){const n=t.node(-1),o=d.get(n),l=t.start(-1),s=o.rectBetween(t.pos-l,e.pos-l),i=t.node(0),c=o.cellsInRect(s).filter(t=>t!=e.pos-l);c.unshift(e.pos-l);const a=c.map(t=>{const e=n.nodeAt(t);if(!e)throw RangeError(`No cell with offset ${t} found`);const o=l+t+1;return new r.yn(i.resolve(o),i.resolve(o+e.content.size))});super(a[0].$from,a[0].$to,a),this.$anchorCell=t,this.$headCell=e}map(e,n){const o=e.resolve(n.map(this.$anchorCell.pos)),l=e.resolve(n.map(this.$headCell.pos));if(S(o)&&S(l)&&$(o,l)){const e=this.$anchorCell.node(-1)!=o.node(-1);return e&&this.isRowSelection()?t.rowSelection(o,l):e&&this.isColSelection()?t.colSelection(o,l):new t(o,l)}return r.U3.between(o,l)}content(){const t=this.$anchorCell.node(-1),e=d.get(t),n=this.$anchorCell.start(-1),o=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),l={},r=[];for(let c=o.top;c<o.bottom;c++){const n=[];for(let r=c*e.width+o.left,s=o.left;s<o.right;s++,r++){const s=e.map[r];if(l[s])continue;l[s]=!0;const i=e.findCell(s);let c=t.nodeAt(s);if(!c)throw RangeError(`No cell with offset ${s} found`);const a=o.left-i.left,d=i.right-o.right;if(a>0||d>0){let t=c.attrs;if(a>0&&(t=M(t,0,a)),d>0&&(t=M(t,t.colspan-d,d)),i.left<o.left){if(c=c.type.createAndFill(t),!c)throw RangeError(`Could not create cell with attrs ${JSON.stringify(t)}`)}else c=c.type.create(t,c.content)}if(i.top<o.top||i.bottom>o.bottom){const t={...c.attrs,rowspan:Math.min(i.bottom,o.bottom)-Math.max(i.top,o.top)};c=i.top<o.top?c.type.createAndFill(t):c.type.create(t,c.content)}n.push(c)}r.push(t.child(c).copy(s.FK.from(n)))}const i=this.isColSelection()&&this.isRowSelection()?t:r;return new s.Ji(s.FK.from(i),1,1)}replace(t,e=s.Ji.empty){const n=t.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){const{$from:l,$to:i}=o[r],c=t.mapping.slice(n);t.replace(c.map(l.pos),c.map(i.pos),r?s.Ji.empty:e)}const l=r.LN.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);l&&t.setSelection(l)}replaceWith(t,e){this.replace(t,new s.Ji(s.FK.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=d.get(e),o=this.$anchorCell.start(-1),l=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let r=0;r<l.length;r++)t(e.nodeAt(l[r]),o+l[r])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const o=e.node(-1),l=d.get(o),r=e.start(-1),s=l.findCell(e.pos-r),i=l.findCell(n.pos-r),c=e.node(0);return s.top<=i.top?(s.top>0&&(e=c.resolve(r+l.map[s.left])),i.bottom<l.height&&(n=c.resolve(r+l.map[l.width*(l.height-1)+i.right-1]))):(i.top>0&&(n=c.resolve(r+l.map[i.left])),s.bottom<l.height&&(e=c.resolve(r+l.map[l.width*(l.height-1)+s.right-1]))),new t(e,n)}isRowSelection(){const t=this.$anchorCell.node(-1),e=d.get(t),n=this.$anchorCell.start(-1),o=e.colCount(this.$anchorCell.pos-n),l=e.colCount(this.$headCell.pos-n);if(Math.min(o,l)>0)return!1;const r=o+this.$anchorCell.nodeAfter.attrs.colspan,s=l+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,s)==e.width}eq(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const o=e.node(-1),l=d.get(o),r=e.start(-1),s=l.findCell(e.pos-r),i=l.findCell(n.pos-r),c=e.node(0);return s.left<=i.left?(s.left>0&&(e=c.resolve(r+l.map[s.top*l.width])),i.right<l.width&&(n=c.resolve(r+l.map[l.width*(i.top+1)-1]))):(i.left>0&&(n=c.resolve(r+l.map[i.top*l.width])),s.right<l.width&&(e=c.resolve(r+l.map[l.width*(s.top+1)-1]))),new t(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,o=n){return new t(e.resolve(n),e.resolve(o))}getBookmark(){return new _(this.$anchorCell.pos,this.$headCell.pos)}};k.prototype.visible=!1,r.LN.jsonID("cell",k);var _=class t{constructor(t,e){this.anchor=t,this.head=e}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&$(e,n)?new k(e,n):r.LN.near(n,1)}};function x(t){if(!(t.selection instanceof k))return null;const e=[];return t.selection.forEachCell((t,n)=>{e.push(i.NZ.node(n,n+t.nodeSize,{class:"selectedCell"}))}),i.zF.create(t.doc,e)}function E({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,o=e.pos,l=t.depth;for(;l>=0;l--,n++)if(t.after(l+1)<t.end(l))break;for(let r=e.depth;r>=0;r--,o--)if(e.before(r+1)>e.start(r))break;return n==o&&/row|table/.test(t.node(l).type.spec.tableRole)}function L({$from:t,$to:e}){let n,o;for(let l=t.depth;l>0;l--){const e=t.node(l);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){n=e;break}}for(let l=e.depth;l>0;l--){const t=e.node(l);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){o=t;break}}return n!==o&&0===e.parentOffset}function F(t,e,n){const o=(e||t).selection,l=(e||t).doc;let s,i;if(o instanceof r.nh&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)s=k.create(l,o.from);else if("row"==i){const t=l.resolve(o.from+1);s=k.rowSelection(t,t)}else if(!n){const t=d.get(o.node),e=o.from+1,n=e+t.map[t.width*t.height-1];s=k.create(l,e+1,n)}}else o instanceof r.U3&&E(o)?s=r.U3.create(l,o.from):o instanceof r.U3&&L(o)&&(s=r.U3.create(l,o.$from.start(),o.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var D=new r.hs("fix-tables");function H(t,e,n,o){const l=t.childCount,r=e.childCount;t:for(let s=0,i=0;s<r;s++){const r=e.child(s);for(let e=i,o=Math.min(l,s+3);e<o;e++)if(t.child(e)==r){i=e+1,n+=r.nodeSize;continue t}o(r,n),i<l&&t.child(i).sameMarkup(r)?H(t.child(i),r,n+1,o):r.nodesBetween(0,r.content.size,o,n+1),n+=r.nodeSize}}function K(t,e){let n;const o=(e,o)=>{"table"==e.type.spec.tableRole&&(n=B(t,e,o,n))};return e?e.doc!=t.doc&&H(e.doc,t.doc,0,o):t.doc.descendants(o),n}function B(t,e,n,o){const l=d.get(e);if(!l.problems)return o;o||(o=t.tr);const r=[];for(let c=0;c<l.height;c++)r.push(0);for(let c=0;c<l.problems.length;c++){const t=l.problems[c];if("collision"==t.type){const l=e.nodeAt(t.pos);if(!l)continue;const s=l.attrs;for(let e=0;e<s.rowspan;e++)r[t.row+e]+=t.n;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,M(s,s.colspan-t.n,t.n))}else if("missing"==t.type)r[t.row]+=t.n;else if("overlong_rowspan"==t.type){const l=e.nodeAt(t.pos);if(!l)continue;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,{...l.attrs,rowspan:l.attrs.rowspan-t.n})}else if("colwidth mismatch"==t.type){const l=e.nodeAt(t.pos);if(!l)continue;o.setNodeMarkup(o.mapping.map(n+1+t.pos),null,{...l.attrs,colwidth:t.colwidth})}else if("zero_sized"==t.type){const t=o.mapping.map(n);o.delete(t,t+e.nodeSize)}}let s,i;for(let c=0;c<r.length;c++)r[c]&&(null==s&&(s=c),i=c);for(let c=0,a=n+1;c<l.height;c++){const n=e.child(c),l=a+n.nodeSize,d=r[c];if(d>0){let e="cell";n.firstChild&&(e=n.firstChild.type.spec.tableRole);const r=[];for(let n=0;n<d;n++){const n=m(t.schema)[e].createAndFill();n&&r.push(n)}const h=0!=c&&s!=c-1||i!=c?l-1:a+1;o.insert(o.mapping.map(h),r)}a=l}return o.setMeta(D,{fixTables:!0})}function W(t){const e=t.selection,n=v(t),o=n.node(-1),l=n.start(-1),r=d.get(o),s=e instanceof k?r.rectBetween(e.$anchorCell.pos-l,e.$headCell.pos-l):r.findCell(n.pos-l);return{...s,tableStart:l,map:r,table:o}}function T(t,{map:e,tableStart:n,table:o},l){let r=l>0?-1:0;z(e,o,l+r)&&(r=0==l||l==e.width?null:0);for(let s=0;s<e.height;s++){const i=s*e.width+l;if(l>0&&l<e.width&&e.map[i-1]==e.map[i]){const r=e.map[i],c=o.nodeAt(r);t.setNodeMarkup(t.mapping.map(n+r),null,R(c.attrs,l-e.colCount(r))),s+=c.attrs.rowspan-1}else{const c=null==r?m(o.type.schema).cell:o.nodeAt(e.map[i+r]).type,a=e.positionAt(s,l,o);t.insert(t.mapping.map(n+a),c.createAndFill())}}return t}function J(t,e){if(!C(t))return!1;if(e){const n=W(t);e(T(t.tr,n,n.left))}return!0}function I(t,e){if(!C(t))return!1;if(e){const n=W(t);e(T(t.tr,n,n.right))}return!0}function U(t,{map:e,table:n,tableStart:o},l){const r=t.mapping.maps.length;for(let s=0;s<e.height;){const i=s*e.width+l,c=e.map[i],a=n.nodeAt(c),d=a.attrs;if(l>0&&e.map[i-1]==c||l<e.width-1&&e.map[i+1]==c)t.setNodeMarkup(t.mapping.slice(r).map(o+c),null,M(d,l-e.colCount(c)));else{const e=t.mapping.slice(r).map(o+c);t.delete(e,e+a.nodeSize)}s+=d.rowspan}}function O(t,e){if(!C(t))return!1;if(e){const n=W(t),o=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let t=n.right-1;;t--){if(U(o,n,t),t==n.left)break;const e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=d.get(e)}e(o)}return!0}function X(t,e,n){var o;const l=m(e.type.schema).header_cell;for(let r=0;r<t.width;r++)if((null==(o=e.nodeAt(t.map[r+n*t.width]))?void 0:o.type)!=l)return!1;return!0}function V(t,{map:e,tableStart:n,table:o},l){var r;let s=n;for(let a=0;a<l;a++)s+=o.child(a).nodeSize;const i=[];let c=l>0?-1:0;X(e,o,l+c)&&(c=0==l||l==e.height?null:0);for(let a=0,d=e.width*l;a<e.width;a++,d++)if(l>0&&l<e.height&&e.map[d]==e.map[d-e.width]){const l=e.map[d],r=o.nodeAt(l).attrs;t.setNodeMarkup(n+l,null,{...r,rowspan:r.rowspan+1}),a+=r.colspan-1}else{const t=null==c?m(o.type.schema).cell:null==(r=o.nodeAt(e.map[d+c*e.width]))?void 0:r.type,n=null==t?void 0:t.createAndFill();n&&i.push(n)}return t.insert(s,m(o.type.schema).row.create(null,i)),t}function P(t,e){if(!C(t))return!1;if(e){const n=W(t);e(V(t.tr,n,n.top))}return!0}function q(t,e){if(!C(t))return!1;if(e){const n=W(t);e(V(t.tr,n,n.bottom))}return!0}function G(t,{map:e,table:n,tableStart:o},l){let r=0;for(let a=0;a<l;a++)r+=n.child(a).nodeSize;const s=r+n.child(l).nodeSize,i=t.mapping.maps.length;t.delete(r+o,s+o);const c=new Set;for(let a=0,d=l*e.width;a<e.width;a++,d++){const r=e.map[d];if(!c.has(r))if(c.add(r),l>0&&r==e.map[d-e.width]){const e=n.nodeAt(r).attrs;t.setNodeMarkup(t.mapping.slice(i).map(r+o),null,{...e,rowspan:e.rowspan-1}),a+=e.colspan-1}else if(l<e.height&&r==e.map[d+e.width]){const s=n.nodeAt(r),c=s.attrs,d=s.type.create({...c,rowspan:s.attrs.rowspan-1},s.content),h=e.positionAt(l+1,a,n);t.insert(t.mapping.slice(i).map(o+h),d),a+=c.colspan-1}}}function Z(t,e){if(!C(t))return!1;if(e){const n=W(t),o=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let t=n.bottom-1;;t--){if(G(o,n,t),t==n.top)break;const e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=d.get(n.table)}e(o)}return!0}function Y(t){const e=t.content;return 1==e.childCount&&e.child(0).isTextblock&&0==e.child(0).childCount}function j({width:t,height:e,map:n},o){let l=o.top*t+o.left,r=l,s=(o.bottom-1)*t+o.left,i=l+(o.right-o.left-1);for(let c=o.top;c<o.bottom;c++){if(o.left>0&&n[r]==n[r-1]||o.right<t&&n[i]==n[i+1])return!0;r+=t,i+=t}for(let c=o.left;c<o.right;c++){if(o.top>0&&n[l]==n[l-t]||o.bottom<e&&n[s]==n[s+t])return!0;l++,s++}return!1}function Q(t,e){const n=t.selection;if(!(n instanceof k)||n.$anchorCell.pos==n.$headCell.pos)return!1;const o=W(t),{map:l}=o;if(j(l,o))return!1;if(e){const n=t.tr,r={};let i,c,a=s.FK.empty;for(let t=o.top;t<o.bottom;t++)for(let e=o.left;e<o.right;e++){const s=l.map[t*l.width+e],d=o.table.nodeAt(s);if(!r[s]&&d)if(r[s]=!0,null==i)i=s,c=d;else{Y(d)||(a=a.append(d.content));const t=n.mapping.map(s+o.tableStart);n.delete(t,t+d.nodeSize)}}if(null==i||null==c)return!0;if(n.setNodeMarkup(i+o.tableStart,null,{...R(c.attrs,c.attrs.colspan,o.right-o.left-c.attrs.colspan),rowspan:o.bottom-o.top}),a.size){const t=i+1+c.content.size,e=Y(c)?i+1:t;n.replaceWith(e+o.tableStart,t+o.tableStart,a)}n.setSelection(new k(n.doc.resolve(i+o.tableStart))),e(n)}return!0}function tt(t,e){const n=m(t.schema);return et(({node:t})=>n[t.type.spec.tableRole])(t,e)}function et(t){return(e,n)=>{var o;const l=e.selection;let r,s;if(l instanceof k){if(l.$anchorCell.pos!=l.$headCell.pos)return!1;r=l.$anchorCell.nodeAfter,s=l.$anchorCell.pos}else{if(r=b(l.$from),!r)return!1;s=null==(o=g(l.$from))?void 0:o.pos}if(null==r||null==s)return!1;if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){let o=r.attrs;const i=[],c=o.colwidth;o.rowspan>1&&(o={...o,rowspan:1}),o.colspan>1&&(o={...o,colspan:1});const a=W(e),d=e.tr;for(let t=0;t<a.right-a.left;t++)i.push(c?{...o,colwidth:c&&c[t]?[c[t]]:null}:o);let h;for(let e=a.top;e<a.bottom;e++){let n=a.map.positionAt(e,a.left,a.table);e==a.top&&(n+=r.nodeSize);for(let o=a.left,l=0;o<a.right;o++,l++)o==a.left&&e==a.top||d.insert(h=d.mapping.map(n+a.tableStart,1),t({node:r,row:e,col:o}).createAndFill(i[l]))}d.setNodeMarkup(s,t({node:r,row:a.top,col:a.left}),i[0]),l instanceof k&&d.setSelection(new k(d.doc.resolve(l.$anchorCell.pos),h?d.doc.resolve(h):void 0)),n(d)}return!0}}function nt(t,e){return function(n,o){if(!C(n))return!1;const l=v(n);if(l.nodeAfter.attrs[t]===e)return!1;if(o){const r=n.tr;n.selection instanceof k?n.selection.forEachCell((n,o)=>{n.attrs[t]!==e&&r.setNodeMarkup(o,null,{...n.attrs,[t]:e})}):r.setNodeMarkup(l.pos,null,{...l.nodeAfter.attrs,[t]:e}),o(r)}return!0}}function ot(t){return function(e,n){if(!C(e))return!1;if(n){const o=m(e.schema),l=W(e),r=e.tr,s=l.map.cellsInRect("column"==t?{left:l.left,top:0,right:l.right,bottom:l.map.height}:"row"==t?{left:0,top:l.top,right:l.map.width,bottom:l.bottom}:l),i=s.map(t=>l.table.nodeAt(t));for(let t=0;t<s.length;t++)i[t].type==o.header_cell&&r.setNodeMarkup(l.tableStart+s[t],o.cell,i[t].attrs);if(0==r.steps.length)for(let t=0;t<s.length;t++)r.setNodeMarkup(l.tableStart+s[t],o.header_cell,i[t].attrs);n(r)}return!0}}function lt(t,e,n){const o=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let l=0;l<o.length;l++){const t=e.table.nodeAt(o[l]);if(t&&t.type!==n.header_cell)return!1}return!0}function rt(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?ot(t):function(e,n){if(!C(e))return!1;if(n){const o=m(e.schema),l=W(e),r=e.tr,s=lt("row",l,o),i=lt("column",l,o),c="column"===t?s:"row"===t&&i,a=c?1:0,d="column"==t?{left:0,top:a,right:1,bottom:l.map.height}:"row"==t?{left:a,top:0,right:l.map.width,bottom:1}:l,h="column"==t?i?o.cell:o.header_cell:"row"==t?s?o.cell:o.header_cell:o.cell;l.map.cellsInRect(d).forEach(t=>{const e=t+l.tableStart,n=r.doc.nodeAt(e);n&&r.setNodeMarkup(e,h,n.attrs)}),n(r)}return!0}}rt("row",{useDeprecatedLogic:!0}),rt("column",{useDeprecatedLogic:!0});var st=rt("cell",{useDeprecatedLogic:!0});function it(t,e){if(e<0){const e=t.nodeBefore;if(e)return t.pos-e.nodeSize;for(let n=t.index(-1)-1,o=t.before();n>=0;n--){const e=t.node(-1).child(n),l=e.lastChild;if(l)return o-1-l.nodeSize;o-=e.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const e=t.node(-1);for(let n=t.indexAfter(-1),o=t.after();n<e.childCount;n++){const t=e.child(n);if(t.childCount)return o+1;o+=t.nodeSize}}return null}function ct(t){return function(e,n){if(!C(e))return!1;const o=it(v(e),t);if(null==o)return!1;if(n){const t=e.doc.resolve(o);n(e.tr.setSelection(r.U3.between(t,A(t))).scrollIntoView())}return!0}}function at(t,e){const n=t.selection.$anchor;for(let o=n.depth;o>0;o--){const l=n.node(o);if("table"==l.type.spec.tableRole)return e&&e(t.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0}return!1}function dt(t,e){const n=t.selection;if(!(n instanceof k))return!1;if(e){const o=t.tr,l=m(t.schema).cell.createAndFill().content;n.forEachCell((t,e)=>{t.content.eq(l)||o.replace(o.mapping.map(e+1),o.mapping.map(e+t.nodeSize-1),new s.Ji(l,0,0))}),o.docChanged&&e(o)}return!0}function ht(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:o}=t;while(1==e.childCount&&(n>0&&o>0||"table"==e.child(0).type.spec.tableRole))n--,o--,e=e.child(0).content;const l=e.child(0),r=l.type.spec.tableRole,i=l.type.schema,c=[];if("row"==r)for(let a=0;a<e.childCount;a++){let t=e.child(a).content;const l=a?0:Math.max(0,n-1),r=a<e.childCount-1?0:Math.max(0,o-1);(l||r)&&(t=ft(m(i).row,new s.Ji(t,l,r)).content),c.push(t)}else{if("cell"!=r&&"header_cell"!=r)return null;c.push(n||o?ft(m(i).row,new s.Ji(e,n,o)).content:e)}return pt(i,c)}function pt(t,e){const n=[];for(let l=0;l<e.length;l++){const t=e[l];for(let e=t.childCount-1;e>=0;e--){const{rowspan:o,colspan:r}=t.child(e).attrs;for(let t=l;t<l+o;t++)n[t]=(n[t]||0)+r}}let o=0;for(let l=0;l<n.length;l++)o=Math.max(o,n[l]);for(let l=0;l<n.length;l++)if(l>=e.length&&e.push(s.FK.empty),n[l]<o){const r=m(t).cell.createAndFill(),i=[];for(let t=n[l];t<o;t++)i.push(r);e[l]=e[l].append(s.FK.from(i))}return{height:e.length,width:o,rows:e}}function ft(t,e){const n=t.createAndFill(),o=new a.dL(n).replace(0,n.content.size,e);return o.doc}function ut({width:t,height:e,rows:n},o,l){if(t!=o){const e=[],l=[];for(let t=0;t<n.length;t++){const r=n[t],i=[];for(let n=e[t]||0,l=0;n<o;l++){let s=r.child(l%r.childCount);n+s.attrs.colspan>o&&(s=s.type.createChecked(M(s.attrs,s.attrs.colspan,n+s.attrs.colspan-o),s.content)),i.push(s),n+=s.attrs.colspan;for(let n=1;n<s.attrs.rowspan;n++)e[t+n]=(e[t+n]||0)+s.attrs.colspan}l.push(s.FK.from(i))}n=l,t=o}if(e!=l){const t=[];for(let o=0,r=0;o<l;o++,r++){const i=[],c=n[r%e];for(let t=0;t<c.childCount;t++){let e=c.child(t);o+e.attrs.rowspan>l&&(e=e.type.create({...e.attrs,rowspan:Math.max(1,l-e.attrs.rowspan)},e.content)),i.push(e)}t.push(s.FK.from(i))}n=t,e=l}return{width:t,height:e,rows:n}}function mt(t,e,n,o,l,r,i){const c=t.doc.type.schema,a=m(c);let d,h;if(l>e.width)for(let s=0,p=0;s<e.height;s++){const r=n.child(s);p+=r.nodeSize;const c=[];let f;f=null==r.lastChild||r.lastChild.type==a.cell?d||(d=a.cell.createAndFill()):h||(h=a.header_cell.createAndFill());for(let t=e.width;t<l;t++)c.push(f);t.insert(t.mapping.slice(i).map(p-1+o),c)}if(r>e.height){const c=[];for(let t=0,o=(e.height-1)*e.width;t<Math.max(e.width,l);t++){const l=!(t>=e.width)&&n.nodeAt(e.map[o+t]).type==a.header_cell;c.push(l?h||(h=a.header_cell.createAndFill()):d||(d=a.cell.createAndFill()))}const p=a.row.create(null,s.FK.from(c)),f=[];for(let t=e.height;t<r;t++)f.push(p);t.insert(t.mapping.slice(i).map(o+n.nodeSize-2),f)}return!(!d&&!h)}function wt(t,e,n,o,l,r,s,i){if(0==s||s==e.height)return!1;let c=!1;for(let a=l;a<r;a++){const l=s*e.width+a,r=e.map[l];if(e.map[l-e.width]==r){c=!0;const l=n.nodeAt(r),{top:d,left:h}=e.findCell(r);t.setNodeMarkup(t.mapping.slice(i).map(r+o),null,{...l.attrs,rowspan:s-d}),t.insert(t.mapping.slice(i).map(e.positionAt(s,h,n)),l.type.createAndFill({...l.attrs,rowspan:d+l.attrs.rowspan-s})),a+=l.attrs.colspan-1}}return c}function gt(t,e,n,o,l,r,s,i){if(0==s||s==e.width)return!1;let c=!1;for(let a=l;a<r;a++){const l=a*e.width+s,r=e.map[l];if(e.map[l-1]==r){c=!0;const l=n.nodeAt(r),d=e.colCount(r),h=t.mapping.slice(i).map(r+o);t.setNodeMarkup(h,null,M(l.attrs,s-d,l.attrs.colspan-(s-d))),t.insert(h+l.nodeSize,l.type.createAndFill(M(l.attrs,0,s-d))),a+=l.attrs.rowspan-1}}return c}function bt(t,e,n,o,l){let r=n?t.doc.nodeAt(n-1):t.doc;if(!r)throw new Error("No table found");let i=d.get(r);const{top:c,left:a}=o,h=a+l.width,p=c+l.height,f=t.tr;let u=0;function m(){if(r=n?f.doc.nodeAt(n-1):f.doc,!r)throw new Error("No table found");i=d.get(r),u=f.mapping.maps.length}mt(f,i,r,n,h,p,u)&&m(),wt(f,i,r,n,a,h,c,u)&&m(),wt(f,i,r,n,a,h,p,u)&&m(),gt(f,i,r,n,c,p,a,u)&&m(),gt(f,i,r,n,c,p,h,u)&&m();for(let d=c;d<p;d++){const t=i.positionAt(d,a,r),e=i.positionAt(d,h,r);f.replace(f.mapping.slice(u).map(t+n),f.mapping.slice(u).map(e+n),new s.Ji(l.rows[d-c],0,0))}m(),f.setSelection(new k(f.doc.resolve(n+i.positionAt(c,a,r)),f.doc.resolve(n+i.positionAt(p-1,h-1,r)))),e(f)}var Ct=(0,c.K)({ArrowLeft:yt("horiz",-1),ArrowRight:yt("horiz",1),ArrowUp:yt("vert",-1),ArrowDown:yt("vert",1),"Shift-ArrowLeft":St("horiz",-1),"Shift-ArrowRight":St("horiz",1),"Shift-ArrowUp":St("vert",-1),"Shift-ArrowDown":St("vert",1),Backspace:dt,"Mod-Backspace":dt,Delete:dt,"Mod-Delete":dt});function vt(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function yt(t,e){return(n,o,l)=>{if(!l)return!1;const s=n.selection;if(s instanceof k)return vt(n,o,r.LN.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;const i=Mt(l,t,e);if(null==i)return!1;if("horiz"==t)return vt(n,o,r.LN.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(i),s=N(l,t,e);let c;return c=s?r.LN.near(s,1):e<0?r.LN.near(n.doc.resolve(l.before(-1)),-1):r.LN.near(n.doc.resolve(l.after(-1)),1),vt(n,o,c)}}}function St(t,e){return(n,o,l)=>{if(!l)return!1;const r=n.selection;let s;if(r instanceof k)s=r;else{const o=Mt(l,t,e);if(null==o)return!1;s=new k(n.doc.resolve(o))}const i=N(s.$headCell,t,e);return!!i&&vt(n,o,new k(s.$anchorCell,i))}}function At(t,e){const n=t.state.doc,o=g(n.resolve(e));return!!o&&(t.dispatch(t.state.tr.setSelection(new k(o))),!0)}function $t(t,e,n){if(!C(t.state))return!1;let o=ht(n);const l=t.state.selection;if(l instanceof k){o||(o={width:1,height:1,rows:[s.FK.from(ft(m(t.state.schema).cell,n))]});const e=l.$anchorCell.node(-1),r=l.$anchorCell.start(-1),i=d.get(e).rectBetween(l.$anchorCell.pos-r,l.$headCell.pos-r);return o=ut(o,i.right-i.left,i.bottom-i.top),bt(t.state,t.dispatch,r,i,o),!0}if(o){const e=v(t.state),n=e.start(-1);return bt(t.state,t.dispatch,n,d.get(e.node(-1)).findCell(e.pos-n),o),!0}return!1}function Nt(t,e){var n;if(e.ctrlKey||e.metaKey)return;const o=Rt(t,e.target);let l;if(e.shiftKey&&t.state.selection instanceof k)r(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&o&&null!=(l=g(t.state.selection.$anchor))&&(null==(n=zt(t,e))?void 0:n.pos)!=l.pos)r(l,e),e.preventDefault();else if(!o)return;function r(e,n){let o=zt(t,n);const l=null==w.getState(t.state);if(!o||!$(e,o)){if(!l)return;o=e}const r=new k(e,o);if(l||!t.state.selection.eq(r)){const n=t.state.tr.setSelection(r);l&&n.setMeta(w,e.pos),t.dispatch(n)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",i),null!=w.getState(t.state)&&t.dispatch(t.state.tr.setMeta(w,-1))}function i(n){const l=n,i=w.getState(t.state);let c;if(null!=i)c=t.state.doc.resolve(i);else if(Rt(t,l.target)!=o&&(c=zt(t,e),!c))return s();c&&r(c,l)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",i)}function Mt(t,e,n){if(!(t.state.selection instanceof r.U3))return null;const{$head:o}=t.state.selection;for(let l=o.depth-1;l>=0;l--){const r=o.node(l),s=n<0?o.index(l):o.indexAfter(l);if(s!=(n<0?0:r.childCount))return null;if("cell"==r.type.spec.tableRole||"header_cell"==r.type.spec.tableRole){const r=o.before(l),s="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(s)?r:null}}return null}function Rt(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e;return null}function zt(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?g(t.state.doc.resolve(n.pos)):null}var kt=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),_t(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type==this.node.type&&(this.node=t,_t(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))}};function _t(t,e,n,o,l,r){var s;let i=0,c=!0,a=e.firstChild;const d=t.firstChild;if(d){for(let t=0,n=0;t<d.childCount;t++){const{colspan:s,colwidth:h}=d.child(t).attrs;for(let t=0;t<s;t++,n++){const s=l==n?r:h&&h[t],d=s?s+"px":"";if(i+=s||o,s||(c=!1),a)a.style.width!=d&&(a.style.width=d),a=a.nextSibling;else{const t=document.createElement("col");t.style.width=d,e.appendChild(t)}}}while(a){const t=a.nextSibling;null==(s=a.parentNode)||s.removeChild(a),a=t}c?(n.style.width=i+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=i+"px")}}var xt=new r.hs("tableColumnResizing");function Et({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:o=kt,lastColumnResizable:l=!0}={}){const s=new r.k_({key:xt,state:{init(t,e){var l,r;const i=null==(r=null==(l=s.spec)?void 0:l.props)?void 0:r.nodeViews,c=m(e.schema).table.name;return o&&i&&(i[c]=(t,e)=>new o(t,n,e)),new Lt(-1,!1)},apply(t,e){return e.apply(t)}},props:{attributes:t=>{const e=xt.getState(t);return e&&e.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(e,n)=>{Ft(e,n,t,l)},mouseleave:t=>{Dt(t)},mousedown:(t,o)=>{Ht(t,o,e,n)}},decorations:t=>{const e=xt.getState(t);if(e&&e.activeHandle>-1)return Xt(t,e.activeHandle)},nodeViews:{}}});return s}var Lt=class t{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(e){const n=this,o=e.getMeta(xt);if(o&&null!=o.setHandle)return new t(o.setHandle,!1);if(o&&void 0!==o.setDragging)return new t(n.activeHandle,o.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return S(e.doc.resolve(o))||(o=-1),new t(o,n.dragging)}return n}};function Ft(t,e,n,o){if(!t.editable)return;const l=xt.getState(t.state);if(l&&!l.dragging){const r=Bt(e.target);let s=-1;if(r){const{left:o,right:l}=r.getBoundingClientRect();e.clientX-o<=n?s=Wt(t,e,"left",n):l-e.clientX<=n&&(s=Wt(t,e,"right",n))}if(s!=l.activeHandle){if(!o&&-1!==s){const e=t.state.doc.resolve(s),n=e.node(-1),o=d.get(n),l=e.start(-1),r=o.colCount(e.pos-l)+e.nodeAfter.attrs.colspan-1;if(r==o.width-1)return}Jt(t,s)}}}function Dt(t){if(!t.editable)return;const e=xt.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&Jt(t,-1)}function Ht(t,e,n,o){var l;if(!t.editable)return!1;const r=null!=(l=t.dom.ownerDocument.defaultView)?l:window,s=xt.getState(t.state);if(!s||-1==s.activeHandle||s.dragging)return!1;const i=t.state.doc.nodeAt(s.activeHandle),c=Kt(t,s.activeHandle,i.attrs);function a(e){r.removeEventListener("mouseup",a),r.removeEventListener("mousemove",d);const o=xt.getState(t.state);(null==o?void 0:o.dragging)&&(It(t,o.activeHandle,Tt(o.dragging,e,n)),t.dispatch(t.state.tr.setMeta(xt,{setDragging:null})))}function d(e){if(!e.which)return a(e);const l=xt.getState(t.state);if(l&&l.dragging){const r=Tt(l.dragging,e,n);Ut(t,l.activeHandle,r,o)}}return t.dispatch(t.state.tr.setMeta(xt,{setDragging:{startX:e.clientX,startWidth:c}})),Ut(t,s.activeHandle,c,o),r.addEventListener("mouseup",a),r.addEventListener("mousemove",d),e.preventDefault(),!0}function Kt(t,e,{colspan:n,colwidth:o}){const l=o&&o[o.length-1];if(l)return l;const r=t.domAtPos(e),s=r.node.childNodes[r.offset];let i=s.offsetWidth,c=n;if(o)for(let a=0;a<n;a++)o[a]&&(i-=o[a],c--);return i/c}function Bt(t){while(t&&"TD"!=t.nodeName&&"TH"!=t.nodeName)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Wt(t,e,n,o){const l="right"==n?-o:o,r=t.posAtCoords({left:e.clientX+l,top:e.clientY});if(!r)return-1;const{pos:s}=r,i=g(t.state.doc.resolve(s));if(!i)return-1;if("right"==n)return i.pos;const c=d.get(i.node(-1)),a=i.start(-1),h=c.map.indexOf(i.pos-a);return h%c.width==0?-1:a+c.map[h-1]}function Tt(t,e,n){const o=e.clientX-t.startX;return Math.max(n,t.startWidth+o)}function Jt(t,e){t.dispatch(t.state.tr.setMeta(xt,{setHandle:e}))}function It(t,e,n){const o=t.state.doc.resolve(e),l=o.node(-1),r=d.get(l),s=o.start(-1),i=r.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let a=0;a<r.height;a++){const t=a*r.width+i;if(a&&r.map[t]==r.map[t-r.width])continue;const e=r.map[t],o=l.nodeAt(e).attrs,d=1==o.colspan?0:i-r.colCount(e);if(o.colwidth&&o.colwidth[d]==n)continue;const h=o.colwidth?o.colwidth.slice():Ot(o.colspan);h[d]=n,c.setNodeMarkup(s+e,null,{...o,colwidth:h})}c.docChanged&&t.dispatch(c)}function Ut(t,e,n,o){const l=t.state.doc.resolve(e),r=l.node(-1),s=l.start(-1),i=d.get(r).colCount(l.pos-s)+l.nodeAfter.attrs.colspan-1;let c=t.domAtPos(l.start(-1)).node;while(c&&"TABLE"!=c.nodeName)c=c.parentNode;c&&_t(r,c.firstChild,c,o,i,n)}function Ot(t){return Array(t).fill(0)}function Xt(t,e){var n;const o=[],l=t.doc.resolve(e),r=l.node(-1);if(!r)return i.zF.empty;const s=d.get(r),c=l.start(-1),a=s.colCount(l.pos-c)+l.nodeAfter.attrs.colspan-1;for(let d=0;d<s.height;d++){const e=a+d*s.width;if((a==s.width-1||s.map[e]!=s.map[e+1])&&(0==d||s.map[e]!=s.map[e-s.width])){const l=s.map[e],a=c+l+r.nodeAt(l).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",(null==(n=xt.getState(t))?void 0:n.dragging)&&o.push(i.NZ.node(c+l,c+l+r.nodeAt(l).nodeSize,{class:"column-resize-dragging"})),o.push(i.NZ.widget(a,d))}}return i.zF.create(t.doc,o)}function Vt({allowTableNodeSelection:t=!1}={}){return new r.k_({key:w,state:{init(){return null},apply(t,e){const n=t.getMeta(w);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;const{deleted:o,pos:l}=t.mapping.mapResult(e);return o?null:l}},props:{decorations:x,handleDOMEvents:{mousedown:Nt},createSelectionBetween(t){return null!=w.getState(t.state)?t.state.selection:null},handleTripleClick:At,handleKeyDown:Ct,handlePaste:$t},appendTransaction(e,n,o){return F(o,K(o,n),t)}})}}};