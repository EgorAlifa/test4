/**
 * Required only by Global Scope Remotes mode
 *
 * @module
 * @type {*|{}}
 */


const Aliases = require('../../common/aliases');

const { writeFile } = require('fs');
const { join } = require('path');

const ImportMap = {
  imports: {
    ...Object.fromEntries(
      Object.entries(Aliases).map(([ alias, resolved ]) => [alias, resolved]))
  }
};

const stringifyImportMap = (content) => JSON.stringify(content, undefined, 2);

const importMapFilePath = join(process.cwd(), 'dist/core.importmap.json');

writeFile(importMapFilePath, stringifyImportMap(ImportMap), (err) => {
  if (err) {
    throw err;
  }

  console.log(`'${remoteEntryFilePath}' successfully patched`);
});

