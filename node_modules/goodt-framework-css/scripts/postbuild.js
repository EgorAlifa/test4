const { exec } = require('child_process');
const packageJson = require('./../package.json');
const { version } = packageJson;
let [message = ''] = process.argv.slice(2);

message = message.replace('%s', version);
console.log(`tag: ${version} | message: ${message}`);
exec(`git add . && git commit -m "${message}" && git tag ${version}`, (error, stdout, stderr) => {
    if (error) {
        console.log(`error: ${error.message}`);
        return;
    }
    if (stderr) {
        console.log(`stderr: ${stderr}`);
        return;
    }
    console.log(`Output: ${stdout}`);
});
