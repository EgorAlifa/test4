import { IDatasetRequestProps, QueryModel, DataClient, IDatasetResult } from '@goodt-common/data';
import { RequestBuilder } from './request-builder';

export class Request {
    /** @type {RequestBuilder} */
    protected _requestBuilder: RequestBuilder;

    /**
     *
     * @type {number}
     */
    public offset: number = 0;

    public limit: number;

    public readonly name: string;

    public readonly isLoading: boolean = false;

    public readonly query: QueryModel;

    /**
     * @param {IDatasetRequestProps} options
     * @param {DataClient} client
     */
    constructor(options: IDatasetRequestProps, { client }: { client: DataClient } = {});

    /**
     * @param {IDatasetRequestProps} options
     */
    set options(options: IDatasetRequestProps);

    /**
     *
     * @param {boolean} debug
     * @return {Promise<IDatasetResult>}
     */
    send({ debug } = {}): Promise<IDatasetResult>;

    /**
     *
     */
    cancel();

    private _processResult(IDatasetResult): IDatasetResult;
}

export function DatasetRequestFactory(
    requestConfig: IDatasetRequestProps,
    { clientConfig }?: { clientConfig: { isAdmin: boolean } }
): Request;

