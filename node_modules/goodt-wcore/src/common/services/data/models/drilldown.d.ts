import { IDatasetQueryFilterInfo } from '../types';

export interface IDatasetQueryDrilldown {
    name: string,
    dimensions: string[]
}

export class Drilldown {
    private _index: number;

    public dimensions: string[];

    public name: string;

    public filters: IDatasetQueryFilterInfo[];

    public readonly length: number;

    public index: number;

    public readonly dimension: string;

    constructor(drilldown: IDatasetQueryDrilldown);

    push(dimensionValue: string|number|boolean);

    pop();

    readonly canPop: boolean;

    readonly canPush: boolean
}

export class DrilldownService {

    public models: Record<string, Drilldown>;

    constructor(drilldowns: IDatasetQueryDrilldown[]);

    public readonly names: string[];

    public readonly dimensions: string[];

    public readonly activeDimensions: string[];

    public readonly filters: IDatasetQueryFilterInfo[];

    get(name: string): Drilldown;
    has(name: string): boolean;

    // ?
    getDimensionByDrilldownName(name: string): string;

    push(name: string, value: any): Drilldown;

    pop(name: string): Drilldown;

    setIndex(name: string, index: number): Drilldown;

    canPop(name: string): boolean;
    canPush(name: string): boolean;

    // get query(): IDatasetQuery;
    getNameByDimension(dimension: string): string;
    getDimension(name: string): string;
}
