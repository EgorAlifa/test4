<template>
    <div>
        <control-layout v-bind="{ prop, colSize: 'auto', labelSize: 'small' }">
            <template #label="{ Label, getLabel }">
                <label class="text-truncate u-select-none" :for="id">
                    <!--
                    @slot label slot
                    -->
                    <slot v-bind="{ getLabel }">
                        <component :is="Label"></component>
                    </slot>
                </label>
            </template>
            <template #hint="{ getHint }">

                <!--
                @slot hint slot
                -->
                <slot name="hint" v-bind="{ getHint }" />
            </template>
            <template #control>
                <input
                    :id="id"
                    class="switch switch-small pull-left"
                    :class="controlCl"
                    type="checkbox"
                    v-bind="attrsCb"
                    v-on="listeners"
                />
            </template>
        </control-layout>
    </div>
</template>
<script>
import { ControlMixin } from './utils/index';

let ID = 0;

export default {
    mixins: [ControlMixin],
    props: {
        /** @model */
        value: {
            type: Boolean,
            default: false
        },
        valuePath: {
            type: String,
            default: null
        }
    },
    computed: {
        id() {
            return `ui-switch-${ID++}`;
        },
        attrsCb() {
            const { value, ...attrs } = this.attrs;
            return { ...attrs, checked: value };
        }
    },
    methods: {
        valueExtract: (event) => event.target.checked
    }
};
</script>
