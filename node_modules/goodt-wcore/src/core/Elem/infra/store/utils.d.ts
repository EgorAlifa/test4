import { ElemDescriptorVarMetasMap, ElemDescriptorVarAliasesMap } from '@goodt-wcore/elem';
import { SafeResult } from '@goodt-common/utils';
import { StoreGlobalState, StoreElemState, ValueObject, ValueObjectMeta } from '@goodt-wcore/managers';
export function buildInternalStateFromExternal(
    {
        externalState,
        varAliases,
        varsDescriptor
    }: {
        externalState: StoreGlobalState;
        varAliases?: ElemDescriptorVarAliasesMap;
        varsDescriptor?: ElemDescriptorVarMetasMap;
    },
    {
        unwrapStoreValue,
        onInvalidType
    }?: {
        unwrapStoreValue?: <T = any>(valueObject: ValueObject) => T;
        onInvalidType?: (error: CoreWarning) => void;
    }
): StoreElemState;

export function buildExternalStateFromInternal(
    {
        internalState,
        varAliases,
        varsDescriptor
    }: {
        internalState: StoreElemState;
        varAliases?: ElemDescriptorVarAliasesMap;
        varsDescriptor?: ElemDescriptorVarMetasMap;
    },
    {
        buildStoreValue,
        onInvalidType
    }?: {
        buildStoreValue?: (value: any, meta: ValueObjectMeta) => ValueObject;
        onInvalidType?: (error: CoreWarning) => void;
    }
): StoreGlobalState;

export function ensureStateTypes(
    widgetState: StoreElemState,
    { varsDescriptor }: { varsDescriptor: Record<string, VarDescriptor> }
): StoreElemState;

export function validateStateTypes(
    originalState: StoreElemState,
    ensuredState: StoreElemState
): SafeResult<null, CoreWarning[]>;

export { useWatchStore } from './WatchStore';
