import { ValueObjectMeta } from '@goodt-wcore/managers';
import { PropOptions } from 'vue';

export interface ElemDescriptorPropMeta extends PropOptions {
    enum?: string[];
    options?: { value: unknown; label: string }[] | Record<string, any>;
    label?: string | Record<string, string>;
    hint?: string | Record<string, string>;
    factory?: ((...args: IArguments[]) => any) | Record<string, (...args: IArguments[]) => any>;
}

export type ElemDescriptorPropMetasMap = Record<string, ElemDescriptorPropMeta>;

export type ElemDescriptorVarAliasMeta = {
    description?: string;
    sortIndex?: number;
    type?: function | NumberConstructor | StringConstructor | BooleanConstructor | ArrayConstructor;
    scopes?: string[];
};

export type ElemDescriptorVarMetasMap = Record<string, ElemDescriptorVarAliasMeta | string>;

export type ElemDescriptorVarAlias = {
    listen?: string;
    trigger?: string;
    meta?: ValueObjectMeta;
};

export type ElemDescriptorVarAliasesMap = Record<string, ElemDescriptorVarAlias>;

export type ElemDescriptorEventMeta =
    | {
          listen?: string;
          trigger?: string;
      }
    | ['listen']
    | ['trigger']
    | ['listen', 'trigger'];

export type ElemDescriptorEventsMap = Record<string, ElemDescriptorEventMeta>;

export interface ElemDescriptor {
    readonly props?: ElemDescriptorPropMetasMap;
    readonly vars?: ElemDescriptorVarMetasMap;
    readonly events?: ElemDescriptorEventsMap;
}
