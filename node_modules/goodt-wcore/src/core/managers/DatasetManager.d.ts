export default class DatasetManager {
    /**
     * @return {DatasetManager}
     */
    static instance: DatasetManager;
    /**
     * Constructor
     *
     * @param {symbol} enforcer  singleton enforcer
     */
    constructor(enforcer: symbol);
    /**
     * Invokes env file manager's browse method for file selection
     *
     * @param {BrowseOptions} options
     * @return {Promise<BrowseResolverPayload|null>}
     */
    browse(options: BrowseOptions): Promise<BrowseResolverPayload | null>;
    /**
     * Registers a browse() observer (used by the env)
     *
     * @param {BrowseHandler} handler     browse handler invoked by @see browse()
     * @return {Function}                 dispose function to unregister observer
     */
    onBrowse(handler: BrowseHandler): Function;
    /**
     * Invokes env dataset pick method for dataset selection
     *
     * @param {PickOptions} options
     * @return {Promise<PickResolverPayload|null>}
     */
    pick(options: PickOptions): Promise<PickResolverPayload | null>;
    /**
     * Registers a browse() observer (used by the env)
     *
     * @param {PickHandler} handler     pick handler invoked by @see pick()
     * @return {Function}               dispose function to unregister observer
     */
    onPick(handler: PickHandler): Function;

    /**
     * Invokes env datasets manager's cancel method for dataset picking or browsing
     *
     * @param {any} options
     * @return {Promise<any|null>}
     */
    cancel(options: any): Promise<any>;

    /**
     * Registers a cancel() observer (used by the env)
     *
     * @param {CancelHandler} handler     cancel handler invoked by @see cancel()
     * @return {Function}                 dispose function to unregister observer
     */
    onCancel(handler: CancelHandler): Function;
}

export type BrowseHandler = (payload: BrowsePayload) => any;
export type PickHandler = (payload: PickPayload) => any;
export type CancelHandler = (payload: any) => any;

export type BrowseResolver = (payload: BrowseResolverPayload | null) => any;
export type PickResolver = (payload: PickResolverPayload | null) => any;

export type BrowseResolverPayload = {
    datasetId: number | string;
    datasetCode: string;
};

export type PickResolverPayload = {
    datasetMeta: Record<string, any>;
    dataProviderId: string;
};

export type BrowseOptions = {
    connectorId: string | number;
    datasetId: string | number;
};

export type PickOptions = {
    dataProviderId: string;
};

export type BrowsePayload = {
    options: BrowseOptions;
    resolve: BrowseResolver;
};

export type PickPayload = {
    options: PickOptions;
    resolve: PickResolver;
};
